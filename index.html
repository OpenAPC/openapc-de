<!doctype HTML>
<meta charset = 'utf-8'>
<html>
  <head>
    <link rel='stylesheet' href='assets/css/sankey.css'>
    
    <script src='assets/js/d3.v3.js' type='text/javascript'></script>
    <script src='assets/js/sankey.js' type='text/javascript'></script>
    
    <style>
    .rChart {
      display: block;
      margin-left: auto; 
      margin-right: auto;
      width: 960px;
      height: 800px;
    }  
    </style>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Figures on Fee-based Open Access Publishing in Germany ">
    <meta name="author" content="Najko Jahn">
    <script src="http://use.edgefonts.net/source-code-pro.js"></script>
    <script src="http://use.edgefonts.net/quattrocento-sans.js"></script>
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <script href="assets/js/bootstrap.js"></script>
    <script href="assets/js/bootstrap-button.js"></script>
    <script href="assets/js/bootstrap-collapse.js"></script>
    <script href="assets/jquery.js"></script>
    <link rel="stylesheet" href="assets/styles/github.css">
    <script src="assets/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css"></link>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-collapse.js"></script>
</script>
  </head>
  <body>
      <div class="span11 offset1">

     <div class="row">
      <div class=".col-md-12">
       <h1>Datasets on fee-based Open Access publishing</h1>

        <p>For bugs, feature requests and other issues, please submit an <a href="https://github.com/openapc/openapc-de">issue via Github</a>.</p>

          <p>For general comments, email najko.jahn at uni-bielefeld.de  and dirk.pieper at uni-bielefeld.de .</p>

      <p><a href="https://github.com/openapc/openapc-de"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a></p>

      <hr class="soften">

<h2>Dataset Fees paid by German Research Institutions</h2>

 <p>The dataset provides disambiguated data elements for monitoring APC expenditure across institutions per article, in particular:</p>
 <ul>
  <li>Fee paid (including VAT)</li>
  <li>Publication identifiers - DOI, PubMedID, PubMedCentral ID, Web of Science UT</li>
  <li>Disambiguated publisher names and journal titles provided by CrossRef</li>
  <li>Repository Identifier of participating universities.</li>
  <li>ISSN</li>
</ul>

  <a href="https://github.com/openapc/openapc-de/blob/master/data/apc_de.csv" class="btn btn-info btn-lg" role="button">View on GitHub</a>

<h3>Participating Universities</h3>

<p>So far, the following German universities have agreed to share information on paid author processing charges (APC):</p>
<ul>
<li><a href="http://www.ub.uni-bayreuth.de/en/digitale_bibliothek/open_access/index.html">Bayreuth University</a></li>
<li><a href="http://oa.uni-bielefeld.de/publikationsfonds.html">Bielefeld University</a></li>
<li><a href="http://www.ub.tu-clausthal.de/en/angebote-fuer-wissenschaftlerinnen/elektronisches-publizieren/publikationsfonds/">Clausthal University of Technology</a></li>
<li><a href="https://www.tub.tu-harburg.de/publizieren/openaccess/">Hamburg University of Technology</a></li>
<li><a href="http://www.ub.uni-heidelberg.de/Englisch/service/openaccess/publikationsfonds.html">Heidelberg University</a></li>
<li><a href="http://tib.uni-hannover.de/oafonds">Leibniz Universität Hannover</a></li>
<li><a href="https://www.ub.uni-leipzig.de/open-access/publikationsfonds/">Leipzig University</a></li>
<li><a href="http://www.en.ub.uni-muenchen.de/writing/open-access-publishing/funding/index.html">Ludwig-Maximilians-Universität München</a></li>
<li><a href="http://www.fu-berlin.de/sites/open_access/dienstleistungen/artikelgebuehren/publikationsfonds/index.html">Free University of Berlin</a></li>
<li><a href="http://www.bibliothek.kit.edu/cms/kit-publikationsfonds.php">KIT Karlsruhe</a></li>
<li><a href="https://www.uni-giessen.de/ub/en/digitales-publizieren-en/openaccess-en/oafonds-en?set_language=en">Justus Liebig University Giessen </a></li>
<li><a href="http://www.ruhr-uni-bochum.de/oa/">Ruhr Universität Bochum</a></li>
<li><a href="https://www.tu-chemnitz.de/ub/publizieren/openaccess/publikationsfonds.html">Technische Universität Chemnitz</a></li>
<li><a href="http://www.ub.tu-dortmund.de/open-access/index.html">Technische Universität Dortmund</a></li>
<li><a href="http://www.slub-dresden.de/service/schreiben-publizieren/open-access-service/publikationsfonds/">Technische Universität Dresden</a></li>
<li><a href="http://www.uni-bamberg.de/en/ub/publishing/open-access-publishing/open-access-funds/">University of Bamberg</a></li>
<li><a href="https://www.uni-due.de/ub/open_access.shtml">University of Duisburg-Essen</a></li>
<li><a href="http://www.sub.uni-goettingen.de/en/electronic-publishing/open-access/open-access-publication-funding/">University of Göttingen</a></li>
<li><a href="http://www.uni-kassel.de/go/publikationsfonds">University of Kassel</a></li>
<li><a href="http://www.ub.uni-konstanz.de/openaccess/open-access-publikationsfonds-der-universitaet-konstanz/">University of Konstanz</a></li>
<li><a href="http://oa.uni-regensburg.de/">University of Regensburg</a></li>
</ul>

<h2>
<a id="user-content-participating-research-society-funds-in-germany" class="anchor" href="#participating-research-society-funds-in-germany" aria-hidden="true"><span class="octicon octicon-link"></span></a>Participating Research Society Funds in Germany</h2>

<p>Dataset on funds that are supported by research societies under its Open-Access Publishing Programme.</p>

<p>Participating Research Organizations:</p>

<ul>
<li><a href="http://www.mpdl.mpg.de/21-specials/50-open-access-publishing.html">Max Planck Digital Library</a></li>
</ul>

<p>The data content covers APCs as paid for by our central budget for the Max Planck Society.  APCs funded locally by Max Planck Institutes are not part of this data set.  The Max Planck Society has a limited input tax reduction. The refund of input VAT for APC is 20%.</p>

<ul>
<li><a href="http://www.fz-juelich.de/portal/DE/Home/home_node.html">Forschungszentrum Jülich</a></li>
<li><a href="http://bib.telegrafenberg.de/en/library-wissenschaftspark-albert-einstein/">Library Wissenschaftspark Albert Einstein</a></li>
<li><a href="http://bibliothek.inm-gmbh.de/publizieren/publikationsgebuhren/">INM - Leibniz Institute for New Materials</a></li>
<li><a href="https://www.mdc-berlin.de/1161876/de/about_the_mdc/structure/administr%0Aation/library">Max Delbrück Center for Molecular Medicine (MDC)</a></li>
</ul>

<h3>Information on APC (journal level)</h3>
  <ul>
    <li><a href="https://github.com/openapc/openapc-de/pull/1">Information on APCs (sociology)</a></li>
  </ul>
<a href="https://github.com/openapc/openapc-de/blob/master/data/journalsociology/soc_apcs.csv" class="btn btn-info btn-lg" role="button">View on GitHub</a>

<h2>Sample visualisations</h2>

<ul>
    <li>
    <a href="#unik">Fees paid by German Research Institutions</a>
  </li>
  <li>
    <a href="#unide">Comparing Bielefeld and Regensburg fees paid 2012 &mdash; 13</a>
   </li>
    <li>
    <a href="#kit">Fees paid by KIT between 2012 and 2014</a>
    </li>
    <li>
    <a href="#fzj">Fees paid by Forschungszentrum Jülich - Library</a>
    </li>
    <li>
      <a href="#unibamberg">Fees paid by University of Bamberg</a>
    </li>
    <li>
      <a href="#unigoe">Fees paid by State und University Library Göttingen</a>
    </li>
    <li>
    <a href="#unileipzig">Fees paid by Leipzig University open access publishing fund</a>
    </li>
  <li>
    <a href="#unikonstanz">Fees paid by Open-Access-Fonds University of Konstanz 2012 - 2013</a>
  </li>
   <li>
    <a href="#unidue">Fees paid by Open-Access-Fonds University of Duisburg-Essen 2013 - 2014</a>
  </li>
    <li>
    <a href="#unih">Fees paid by Leibniz Universität Hannover Publication Fund since 2013</a>
  </li>
    <li>
        <a href="#unibayreuth">Fees paid by Bayreuth University Publication Fund between 2012 and 2014</a>
    </li>
    <li>
    <a href ="#tuhh">Fees paid by Hamburg University of Technology</a>
    </li>
  <li>
    <a href="#unireg">Fees paid by University of Regensburg Publication Fund 2012 &mdash; 13</a>
  </li>
  <li>
    <a href="#fu">Fees paid by Free University Berlin 2014</a>
  </li>
    <li>
    <a href="#heidi">Fees paid by Heidelberg University 2014</a>
  </li>
    <li>
    <a href="#gfz">Fees paid by GFZ Potsdam</a>
  </li>
    <li>
    <a href="#mdc">Fees paid by Max Delbrück Center</a>
    </li>
    <li>
    <a href="#tuchemnitz">Fees paid by Technische Universität Chemnitz in 2014</a>
    </li>
    <li>
    <a href="#rub">Fees paid by Ruhr Universität Bochum</a>
  </li>
       <li>
    <a href="#tudresden">Fees paid by Technische Universität Dresden</a>
  </li>
         <li>
    <a href="#tudortmund">Fees paid by Technische Universität Dortmund</a>
  </li>
  <li>
    <a href="#kassel">Fees paid by the University of Kassel</a>
  </li> 
  <li>
    <a href="#unibi">Fees paid by Bielefeld University Publication Fund since 2012</a>
  </li>
</ul>

<h3 id="unik">Author fees paid by German Research Institutions</h3>
          
<div id = 'chartf9d586116bf' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chartf9d586116bf",
"width":    960,
"height":    800,
"data": {
 "source": [ "Bayreuth U", "Goettingen U", "Goettingen U", "Konstanz U", "Giessen U", "Heidelberg U", "Regensburg U", "Duisburg-Essen U", "FU Berlin", "FZJ - ZB", "Goettingen U", "KIT", "Leipzig U", "TU Chemnitz", "TU Clausthal", "TU Dresden", "INM - Leibniz-Institut für Neue Materialien", "FU Berlin", "Bielefeld U", "Kassel U", "Konstanz U", "MDC", "MDC", "Giessen U", "Giessen U", "MPG", "Duisburg-Essen U", "Konstanz U", "Bielefeld U", "Giessen U", "Goettingen U", "Regensburg U", "Goettingen U", "Regensburg U", "Bielefeld U", "Goettingen U", "TU Dresden", "Kassel U", "FU Berlin", "Bayreuth U", "FU Berlin", "Giessen U", "Goettingen U", "Regensburg U", "TU Chemnitz", "Bielefeld U", "FU Berlin", "Giessen U", "Heidelberg U", "KIT", "Konstanz U", "Leipzig U", "MDC", "Bayreuth U", "FU Berlin", "FZJ - ZB", "GFZ-Potsdam", "Giessen U", "Goettingen U", "Hannover U", "Heidelberg U", "KIT", "TU Dresden", "Bamberg U", "Goettingen U", "Heidelberg U", "TU Dresden", "Hannover U", "Regensburg U", "Goettingen U", "Regensburg U", "Bamberg U", "Bielefeld U", "Bochum U", "Duisburg-Essen U", "FZJ - ZB", "GFZ-Potsdam", "Giessen U", "Goettingen U", "Leipzig U", "MDC", "TU Dresden", "MDC", "MPG", "Konstanz U", "Kassel U", "KIT", "Heidelberg U", "Kassel U", "KIT", "Regensburg U", "Bamberg U", "Bayreuth U", "Bielefeld U", "Bochum U", "Dortmund TU", "Duisburg-Essen U", "FU Berlin", "FZJ - ZB", "GFZ-Potsdam", "Giessen U", "Goettingen U", "Hannover U", "Heidelberg U", "Kassel U", "KIT", "Konstanz U", "Leipzig U", "MDC", "MPG", "Regensburg U", "TU Chemnitz", "TU Dresden", "Giessen U", "Konstanz U", "Kassel U", "Bielefeld U", "Bochum U", "Duisburg-Essen U", "FZJ - ZB", "Giessen U", "Goettingen U", "Hamburg TUHH", "Hannover U", "Heidelberg U", "INM - Leibniz-Institut für Neue Materialien", "KIT", "Konstanz U", "Leipzig U", "Regensburg U", "TU Dresden", "KIT", "Dortmund TU", "Bayreuth U", "Goettingen U", "Goettingen U", "Bielefeld U", "FZJ - ZB", "Goettingen U", "MDC", "TU Dresden", "Duisburg-Essen U", "KIT", "KIT", "Konstanz U", "Regensburg U", "Kassel U", "Bayreuth U", "Duisburg-Essen U", "Regensburg U", "Dortmund TU", "KIT", "Regensburg U", "Bayreuth U", "Bielefeld U", "Duisburg-Essen U", "Goettingen U", "Hannover U", "Kassel U", "KIT", "Konstanz U", "MPG", "Regensburg U", "Regensburg U", "Bamberg U", "Duisburg-Essen U", "KIT", "Giessen U", "Bamberg U", "Bayreuth U", "Bielefeld U", "Bochum U", "Dortmund TU", "Duisburg-Essen U", "FU Berlin", "FZJ - ZB", "GFZ-Potsdam", "Giessen U", "Goettingen U", "Hannover U", "Heidelberg U", "INM - Leibniz-Institut für Neue Materialien", "Kassel U", "KIT", "Leipzig U", "Regensburg U", "TU Chemnitz", "TU Dresden", "Goettingen U", "Regensburg U", "Leipzig U", "Regensburg U", "Goettingen U", "Bayreuth U", "Bielefeld U", "Duisburg-Essen U", "GFZ-Potsdam", "Giessen U", "Goettingen U", "Heidelberg U", "INM - Leibniz-Institut für Neue Materialien", "KIT", "Konstanz U", "Leipzig U", "MDC", "Regensburg U", "TU Dresden", "Bielefeld U", "Goettingen U", "Hannover U", "Heidelberg U", "KIT", "Regensburg U", "TU Dresden", "Dortmund TU", "FZJ - ZB", "Hamburg TUHH", "Hannover U", "Kassel U", "KIT", "Konstanz U", "TU Chemnitz", "TU Clausthal", "MDC", "Duisburg-Essen U", "Giessen U", "Goettingen U", "KIT", "Konstanz U", "Leipzig U", "MDC", "Regensburg U", "Giessen U", "Regensburg U", "Goettingen U", "Bayreuth U", "Goettingen U", "Konstanz U", "Regensburg U", "Bamberg U", "Bayreuth U", "Hannover U", "Bamberg U", "Bayreuth U", "Bielefeld U", "Bochum U", "Dortmund TU", "Duisburg-Essen U", "FU Berlin", "FZJ - ZB", "GFZ-Potsdam", "Giessen U", "Goettingen U", "Hamburg TUHH", "Hannover U", "Heidelberg U", "Kassel U", "KIT", "Konstanz U", "Leipzig U", "MDC", "MPG", "Regensburg U", "TU Dresden", "Giessen U", "TU Dresden", "KIT", "Heidelberg U", "Leipzig U", "Regensburg U", "Giessen U", "Goettingen U", "FU Berlin", "Hannover U", "KIT", "Bamberg U", "Bayreuth U", "Duisburg-Essen U", "Bayreuth U", "Giessen U", "Bayreuth U", "Bielefeld U", "Bochum U", "Dortmund TU", "FU Berlin", "FZJ - ZB", "Goettingen U", "Hamburg TUHH", "Hannover U", "Heidelberg U", "INM - Leibniz-Institut für Neue Materialien", "KIT", "Konstanz U", "Regensburg U", "TU Chemnitz", "TU Clausthal", "TU Dresden", "Hamburg TUHH", "Kassel U", "Regensburg U", "FU Berlin", "Bamberg U", "Bayreuth U", "Bielefeld U", "Bochum U", "Dortmund TU", "Duisburg-Essen U", "FU Berlin", "FZJ - ZB", "Giessen U", "Goettingen U", "Hamburg TUHH", "Hannover U", "Heidelberg U", "Kassel U", "KIT", "Konstanz U", "Leipzig U", "MDC", "MPG", "Muenchen LMU", "Regensburg U", "TU Chemnitz", "TU Clausthal", "TU Dresden", "TU Chemnitz", "MDC", "Regensburg U", "Duisburg-Essen U", "Leipzig U", "MPG", "Duisburg-Essen U", "INM - Leibniz-Institut für Neue Materialien", "Regensburg U", "Bayreuth U", "Bielefeld U", "Duisburg-Essen U", "FU Berlin", "Giessen U", "Goettingen U", "Heidelberg U", "KIT", "Konstanz U", "Leipzig U", "MDC", "MPG", "Regensburg U", "TU Dresden", "Goettingen U" ],
"target": [ "Academic Journals", "Academic Journals", "Academic Journals (Sapele, Nigeria/Nairobi, Kenya)", "Academy and Industry Research Collaboration Center (AIRCC)", "Acta Dermato-Venereologica", "Acta Dermato-Venereologica", "Acta Dermato-Venereologica", "AIP Publishing", "AIP Publishing", "AIP Publishing", "AIP Publishing", "AIP Publishing", "AIP Publishing", "AIP Publishing", "AIP Publishing", "AIP Publishing", "American Chemical Society (ACS)", "American Mathematical Society (AMS)", "American Physical Society (APS)", "American Physical Society (APS)", "American Physical Society (APS)", "American Physiological Society", "American Society for Clinical Investigation", "American Society for Microbiology", "American Vacuum Society", "American Vacuum Society", "Amsterdam University Press", "Annex Publishers, LLC", "Association for Research in Vision and Ophthalmology (ARVO)", "Association for Research in Vision and Ophthalmology (ARVO)", "Association for Research in Vision and Ophthalmology (ARVO)", "Association for Research in Vision and Ophthalmology (ARVO)", "Baishideng Publishing Group Co., Limited (formerly WJG Press)", "Baishideng Publishing Group Co., Limited (formerly WJG Press)", "BMJ", "BMJ", "BMJ", "Botanical Society of America", "Cambridge University Press (CUP)", "Canadian Center of Science and Education", "Canadian Center of Science and Education", "Canadian Center of Science and Education", "Canadian Center of Science and Education", "Canadian Center of Science and Education", "Canadian Center of Science and Education", "Co-Action Publishing", "Co-Action Publishing", "Co-Action Publishing", "Co-Action Publishing", "Co-Action Publishing", "Co-Action Publishing", "Co-Action Publishing", "Cold Spring Harbor Laboratory Press", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Dove Medical Press Ltd.", "Dove Medical Press Ltd.", "Dove Medical Press Ltd.", "Dove Medical Press Ltd.", "Dundee Science Press", "e-Century Publ. Corp.", "e-Century Publishing Corporation", "EARLI", "Education & Psychology I+D+i", "Elsevier BV", "Elsevier BV", "Elsevier BV", "Elsevier BV", "Elsevier BV", "Elsevier BV", "Elsevier BV", "Elsevier BV", "Elsevier BV", "Elsevier BV", "EMBO", "EMBO", "Environmental Health Perspectives", "ESci Journals Publishing", "ESG", "European Optical Society", "European Optical Society", "F1000 Research, Ltd.", "Food Science Publisher", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Genetics Society of America", "Genetics Society of America", "Gesellschaft für Erdkunde zu Berlin", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "IGIP", "IGITUR, UTRECHT PUBLISHING & ARCHIVING SERVICES", "Impact Journals LLC", "Impact Journals LLC", "Impact Journals, LLC", "Informa UK Limited", "Informa UK Limited", "Informa UK Limited", "Informa UK Limited", "Informa UK Limited", "Institute of Electrical & Electronics Engineers (IEEE)", "Institute of Electrical & Electronics Engineers (IEEE)", "InTech", "InTech", "InTech", "International Food and Agribusiness Management Association", "International Mountain Society (IMS) and United Nations University", "International Scientific Literature", "International Scientific Literature", "International Union of Crystallography (IUCr)", "International Union of Crystallography (IUCr)", "International Union of Crystallography (IUCr)", "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "Ivyspring International Publisher", "JMIR Publications Inc.", "JMIR Publications Inc.", "KIT Scientific Publishing", "Libertas Academica, Ltd.", "Lifescience Global", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI, Basel", "Med Crave", "Medknow", "Medknow", "Mongabay", "Nature Publishing Group", "Nature Publishing Group", "Nature Publishing Group", "Nature Publishing Group", "Nature Publishing Group", "Nature Publishing Group", "Nature Publishing Group", "Nature Publishing Group", "Nature Publishing Group", "Nature Publishing Group", "Nature Publishing Group", "Nature Publishing Group", "Nature Publishing Group", "Nature Publishing Group", "OMICS Publishing Group", "OMICS Publishing Group", "OMICS Publishing Group", "OMICS Publishing Group", "OMICS Publishing Group", "OMICS Publishing Group", "OMICS Publishing Group", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Ovid Technologies (Wolters Kluwer Health)", "Oxford University Press (OUP)", "Oxford University Press (OUP)", "Oxford University Press (OUP)", "Oxford University Press (OUP)", "Oxford University Press (OUP)", "Oxford University Press (OUP)", "Oxford University Press (OUP)", "Oxford University Press (OUP)", "PAGEPress Publications", "PAGEPress Publications", "PeerJ", "Pensoft Publishers", "Pensoft Publishers", "Pensoft Publishers", "Pensoft Publishers", "Pion Ltd", "Portland Press Ltd.", "Portland Press Ltd.", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Regional Euro-Asian Biological Invasions Centre Oy (REABIC)", "Resilience Alliance, Inc.", "RonPub UG", "S. Karger AG", "S. Karger AG", "S. Karger AG", "SAGE Publications", "SAGE Publications", "Schweizerbart", "Schweizerbart", "Schweizerbart", "Sciedu Press", "Sciedu Press", "Sciedu Press", "Sciencedomain International", "Scientific & Academic Publishing", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Sciknow Publications", "Shared Science Publishers OG", "SNI", "Society for Neuroscience", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Symbiosis Group", "The Company of Biologists", "The Feinstein Institute for Medical Research (North Shore LIJ Research Institute)", "Thieme Publishing Group", "Thieme Publishing Group", "Ubiquity Press, Ltd.", "Univ. of Buckingham Pr.", "Walter de Gruyter GmbH", "Walter de Gruyter GmbH", "Wiley-Blackwell", "Wiley-Blackwell", "Wiley-Blackwell", "Wiley-Blackwell", "Wiley-Blackwell", "Wiley-Blackwell", "Wiley-Blackwell", "Wiley-Blackwell", "Wiley-Blackwell", "Wiley-Blackwell", "Wiley-Blackwell", "Wiley-Blackwell", "Wiley-Blackwell", "Wiley-Blackwell", "WJG Press, Baishideng Publ. Group" ],
"value": [ 911.97, 488.79, 491.62, 136.57,  856.8,   1428,    833,   1206, 1176.6, 1728.7, 1025.8, 2996.2, 1914.3, 3244.1, 1002.5,   1178,   2454, 668.04,   1087,   1354, 1104.6, 772.86, 7963.1, 515.99, 1304.2, 737.28,    238,    725, 6512.2,  23176,   1662, 2195.2,   4253,   1111, 1130.5, 1902.2, 1006.7,    236, 1400.8, 226.25,    960, 458.75, 605.06, 481.88, 849.65, 1404.2,    900, 1517.2, 1830.8,   1125,  968.2, 1332.8, 4699.6,  13309, 1113.8,  29016,  36717,  12109,  16101, 7009.6, 8297.9, 1.0231e+05, 1999.2,   1372, 3530.7, 4777.5,   1898, 601.47, 1506.3, 1141.6,    238,     90, 1728.1, 365.23,   2537, 1110.7, 2189.6, 1377.3, 7010.8, 340.74,  10061, 1665.4,    980, 1337.2, 1314.5,    155,   1500,  666.4,    440, 762.67,  192.8,   3840,   3824,  46892, 1142.4,   1280,   4846,  11678,  25440, 3427.2,  47668,  44417,  10282,  11777,   2178,  12821,  31447, 6554.4, 1666.5, 3.5097e+05,  41922, 4950.4, 9465.4, 1428.9, 1803.7,    250,   1928, 1560.5,   2851, 3106.6,   3567, 6530.5, 1655.5, 1132.1, 2349.5, 1679.1,  12240, 2445.4, 2182.6,  12369,  10793,    240,  352.5,   1343, 1617.2, 2548.5,   1017,    792, 1230.3, 1382.2, 970.46,   1283, 3509.2,   1180, 1523.2,    640,    672, 447.18,    385, 1381.9,  155.1, 148.46, 888.53,   2970, 2356.2,   2678,  13498, 6104.7,   8803,  12426, 4910.1,  61482, 5976.9,   2203, 1569.9,   1118,    690, 1019.5,    182,  13789, 4504.3, 1768.1,  300.9,   2878, 3542.8, 2699.3,  16004,  12029,  11291, 8109.4, 4975.9, 1304.5,   1374, 5845.7, 411.45, 9711.1, 1771.9, 9493.7, 779.95, 1000.7, 379.49, 318.01, 217.42, 2290.7, 2290.7,   2235, 8915.5, 2489.5, 9812.7, 1244.7,   1046,  11472, 2290.7, 1999.2,   3425,  15490,   3423, 879.67, 3700.8, 1150.1, 1568.7, 2038.2, 3775.7, 1582.9, 1738.1, 1381.9, 3262.8,  10570,   1700,  81951,  11920, 1657.7, 1373.6, 1221.4,   1982,  33616, 8139.6, 2534.7, 3914.4, 3515.3,  13542,  14780,  892.5,    119, 727.29,    180,    180,  523.6,    357, 786.53,   1000,    930, 2042.1, 7371.6,  35712, 5743.8,   1269,  37101,  16332,  11883, 2371.7,  95887,  96129, 1184.2, 7559.5,  11906,   3683,  40526,  40198,  21546, 6702.1, 2.7549e+05, 1.0088e+05,  20416,  357.5, 1283.5, 240.38, 1959.2, 1130.5,   2413, 2589.6, 1389.9,   1568,   3136,   2541, 229.61, 232.16,    243,  81.86, 451.99,   1252,    732, 2802.4,   1652, 888.05, 753.67,   1446, 738.46,  533.8, 609.71, 236.75, 1393.7, 1330.8, 1366.3, 1275.4, 459.75, 1082.9, 300.05,    607,  366.5, 1500.2,   5820,  13957,  74875,  14307,   1490,  65934,  12761,   2709,  77130, 1.6537e+05, 4770.1, 6788.9,  57228,   1434,  43839,  54998,  35975, 1937.1, 5.2749e+05, 3.8245e+05, 1.0233e+05, 2986.9,    935,  27978, 704.79, 1482.5, 1239.5,    762, 976.22, 2178.7,    909,   1785,  285.6, 1332.8,   4247,   1803, 1585.1, 5641.1, 1332.8, 1618.4,    979, 1820.7, 1344.7, 5683.3,  11760, 5344.7, 1808.8, 1362.3 ] 
},
"nodeWidth":     32,
"nodePadding":      5,
"layout":      2,
"unit": "EURO",
"title": "Author fees paid ",
"id": "chartf9d586116bf" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>
<h3 id="unide">Comparing Bielefeld and Regensburg fees paid 2012 &mdash; 13</h3>

<div id = 'chart8a715b175a7' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart8a715b175a7",
"width":    960,
"height":    600,
"data": {
 "source": [ "Uni Bielefeld", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Bielefeld", "Uni Regensburg", "Uni Bielefeld", "Uni Regensburg", "Uni Bielefeld", "Uni Regensburg", "Uni Bielefeld", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Bielefeld", "Uni Regensburg", "Uni Regensburg", "Uni Bielefeld", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Bielefeld", "Uni Regensburg", "Uni Bielefeld", "Uni Regensburg", "Uni Regensburg", "Uni Bielefeld", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Bielefeld", "Uni Regensburg" ],
"target": [ "Association for Research in Vision and Ophthalmology (ARVO)", "Association for Research in Vision and Ophthalmology (ARVO)", "Baishideng Publishing Group Co., Limited (formerly WJG Press)", "Canadian Center of Science and Education", "e-Century Publ. Corp.", "Elsevier BV", "Food Science Publisher", "Frontiers Media SA", "Frontiers Media SA", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Informa UK Limited", "InTech", "International Scientific Literature", "International Union of Crystallography (IUCr)", "IOP Publishing", "Ivyspring International Publisher", "MDPI AG", "MDPI AG", "Medknow", "Nature Publishing Group", "Nature Publishing Group", "OMICS Publishing Group", "Oxford University Press (OUP)", "PAGEPress Publications", "Pensoft Publishers", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Society for Publication of Acta Dermato-Venereologica ", "Springer Science + Business Media", "Springer Science + Business Media", "The Feinstein Institute for Medical Research (North Shore LIJ Research Institute)", "Walter de Gruyter GmbH", "Wiley-Blackwell", "Wiley-Blackwell" ],
"value": [   3722, 2195.2,   1111, 481.88, 1506.3,    142,  192.8,  27409,  25489,   1928, 3353.2,   1017,    640, 1381.9, 304.93,   1898,  684.1,   3151,   6000, 318.01,   1046, 1244.7, 2807.4, 9549.8,    119,    357,  23271,  51825,    732, 383.11,    833,  42902,  63064, 1239.5,  285.6,   4247, 5344.7 ] 
},
"nodeWidth":     20,
"nodePadding":      8,
"layout":     32,
"unit": "EURO",
"title": "Author fees paid by Bielefeld University and University of Regensburg Publication Fund 2012-13",
"id": "chart8a715b175a7" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>

          <h3 id="kit">Fees paid by KIT between 2012 and 2014</h3>
          
          <h4>Publisher</h4>
          
          <div id = 'chart2c321e21624' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart2c321e21624",
"width":    960,
"height":    800,
"data": {
 "source": [ "KIT", "KIT", "KIT", "KIT", "KIT", "KIT", "KIT", "KIT", "KIT", "KIT", "KIT", "KIT", "KIT", "KIT", "KIT", "KIT", "KIT", "KIT", "KIT", "KIT", "KIT", "KIT", "KIT", "KIT" ],
"target": [ "AIP Publishing", "Co-Action Publishing", "Copernicus GmbH", "ESG", "F1000 Research, Ltd.", "Frontiers Media SA", "Hindawi Publishing Corporation", "IGIP", "Institute of Electrical & Electronics Engineers (IEEE)", "InTech", "International Union of Crystallography (IUCr)", "IOP Publishing", "KIT Scientific Publishing", "MDPI AG", "Nature Publishing Group", "OMICS Publishing Group", "Optical Society of America (OSA)", "Oxford University Press (OUP)", "Public Library of Science (PLoS)", "RonPub UG", "Schweizerbart", "Scientific Research Publishing, Inc,", "Springer Science + Business Media", "Wiley-Blackwell" ],
"value": [ 2996.2,   1125, 1.0231e+05,   1500, 762.67,  12821,  12240,    240, 3509.2,   1180, 148.46,  12426,    690, 5845.7,  11472, 2038.2,  83565, 2534.7,  43715, 240.38,   2541, 1393.7,  43839,    979 ] 
},
"nodeWidth":     32,
"nodePadding":      5,
"layout":      1,
"unit": "EURO",
"title": "Author fees paid ",
"id": "chart2c321e21624" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>
          
          <h4>Journals</h4>

          <div id = 'chart2c371fb0dc' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart2c371fb0dc",
"width":    960,
"height":    800,
"data": {
 "source": [ "International Union of Crystallography (IUCr)", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "MDPI AG", "AIP Publishing", "MDPI AG", "Springer Science + Business Media", "AIP Publishing", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Springer Science + Business Media", "Hindawi Publishing Corporation", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Nature Publishing Group", "Hindawi Publishing Corporation", "Springer Science + Business Media", "Wiley-Blackwell", "MDPI AG", "Springer Science + Business Media", "IOP Publishing", "Springer Science + Business Media", "Springer Science + Business Media", "F1000 Research, Ltd.", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Springer Science + Business Media", "MDPI AG", "Springer Science + Business Media", "Copernicus GmbH", "Springer Science + Business Media", "Copernicus GmbH", "Copernicus GmbH", "Institute of Electrical & Electronics Engineers (IEEE)", "ESG", "IGIP", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "OMICS Publishing Group", "Springer Science + Business Media", "Scientific Research Publishing, Inc,", "KIT Scientific Publishing", "Nature Publishing Group", "Schweizerbart", "Springer Science + Business Media", "Springer Science + Business Media", "Copernicus GmbH", "Springer Science + Business Media", "IOP Publishing", "Oxford University Press (OUP)", "RonPub UG", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Springer Science + Business Media", "MDPI AG", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "MDPI AG", "MDPI AG", "Hindawi Publishing Corporation", "Nature Publishing Group", "Scientific Research Publishing, Inc,", "MDPI AG", "Co-Action Publishing" ],
"target": [ "Acta Crystallographica Section E Structure Reports Online", "Advances in Hematology", "Advances in High Energy Physics", "Agriculture", "AIP Advances", "Algorithms", "AMB Express", "APL Materials", "Atmospheric Chemistry and Physics", "Atmospheric Chemistry and Physics Discussions", "Atmospheric Measurement Techniques Discussions", "Biogeosciences", "Biogeosciences Discussions", "Biointerphases", "BioMed Research International", "BMC Bioinformatics", "BMC Biophysics", "BMC Biotechnology", "BMC Cancer", "BMC Evolutionary Biology", "BMC Genomics", "BMC Microbiology", "Cell Death and Disease", "Chromatography Research International", "Earth, Planets and Space", "Ecology and Evolution", "Energies", "Energy, Sustainability and Society", "Environmental Research Letters", "Environmental Sciences Europe", "EURASIP Journal on Wireless Communications and Networking", "F1000Research", "Frontiers in Aging Neuroscience", "Frontiers in Human Neuroscience", "Frontiers in Neuroscience", "Frontiers in Pharmacology", "Frontiers in Physiology", "Frontiers in Psychology", "Frontiers in Zoology", "Future Internet", "Geochemical Transactions", "Geoscientific Model Development Discussions", "Geothermal Energy", "Hydrology and Earth System Sciences", "Hydrology and Earth System Sciences Discussions", "IEEE Photonics Journal", "International Journal of Electrochemical Science", "International Journal of Engineering Pedagogy", "International Journal of Reconfigurable Computing", "ISRN Mathematical Physics", "ISRN Mechanical Engineering", "Journal of Bioprocessing & Biotechniques", "Journal of Cloud Computing: Advances, Systems and Applications", "Journal of Modern Physics", "Journal of new frontiers in spatial concepts", "Light: Science & Applications", "Meteorologische Zeitschrift", "Microbial Cell Factories", "Nanoscale Research Letters", "Natural Hazards and Earth System Sciences Discussions", "Neural Development", "New Journal of Physics", "Nucleic Acids Research", "Open Journal of Information Systems (OJIS)", "Optical Materials Express", "Optics Express", "Particle and Fibre Toxicology", "Pharmaceuticals", "PLoS Genetics", "PLoS ONE", "Polymers", "Remote Sensing", "Science and Technology of Nuclear Installations", "Scientific Reports", "Smart Grid and Renewable Energy", "Sustainability", "Tellus B" ],
"value": [ 148.46, 943.38, 360.58,  263.1, 1057.9, 602.47, 8451.8, 1938.3, 1207.8,  43890,  28249, 2312.2, 6554.5,   1904, 2650.3, 1453.6, 1749.3, 1489.9, 1494.6, 1470.8, 1442.3, 1462.3,   2856, 397.85, 499.78,    979, 2045.2,   4178,   1080,  761.6, 2969.1, 762.67,    960,   2560, 1876.3,    575,   2560,   4290, 1561.9, 313.61, 737.19,  999.6, 1269.3, 885.36,  16862, 3509.2,   1500,    240, 1340.8, 720.54, 382.95, 2038.2,  749.7, 675.17,    690,   7570,   2541, 4410.1,    952, 1349.5, 3378.4,  11346, 2534.7, 240.38, 2811.4,  80754, 1453.6, 413.55, 7620.2,  36095, 898.96,  892.4, 5443.5,   1046, 718.54, 416.45,   1125 ] 
},
"nodeWidth":     32,
"nodePadding":      5,
"layout":      1,
"unit": "EURO",
"title": "Author fees paid ",
"id": "chart2c371fb0dc" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>
          
<h3 id="fzj">Fees paid by Forschungszentrum Jülich - Library</h3> 
          
<div id = 'chart3ebc7280b6c4' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart3ebc7280b6c4",
"width":    960,
"height":    800,
"data": {
 "source": [ "AIP Publishing", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Elsevier BV", "Elsevier BV", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Informa UK Limited", "IOP Publishing", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "Nature Publishing Group", "Optical Society of America (OSA)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Scientific Research Publishing, Inc,", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Taylor & Francis", "Wiley-Blackwell", "Wiley-Blackwell", "FZJ - ZB", "FZJ - ZB", "FZJ - ZB", "FZJ - ZB", "FZJ - ZB", "FZJ - ZB", "FZJ - ZB", "FZJ - ZB", "FZJ - ZB", "FZJ - ZB", "FZJ - ZB", "FZJ - ZB", "FZJ - ZB", "FZJ - ZB", "FZJ - ZB" ],
"target": [ "APL Materials", "Atmospheric Chemistry and Physics", "Geoscientific Model Development Discussions", "Atmospheric Chemistry and Physics", "Geoscientific Model Development Discussions", "Atmospheric Measurement Techniques Discussions", "Atmospheric Chemistry and Physics Discussions", "Atmospheric Chemistry and Physics Discussions", "Atmospheric Chemistry and Physics Discussions", "Atmospheric Chemistry and Physics Discussions", "Atmospheric Chemistry and Physics Discussions", "Atmospheric Measurement Techniques Discussions", "Atmospheric Chemistry and Physics Discussions", "Atmospheric Chemistry and Physics Discussions", "Atmospheric Measurement Techniques Discussions", "Biogeosciences Discussions", "Atmospheric Chemistry and Physics Discussions", "Atmospheric Measurement Techniques Discussions", "Biogeosciences Discussions", "Geoscientific Model Development Discussions", "Atmospheric Measurement Techniques Discussions", "Atmospheric Chemistry and Physics Discussions", "Atmospheric Chemistry and Physics Discussions", "Atmospheric Chemistry and Physics Discussions", "Climate of the Past", "Atmospheric Chemistry and Physics Discussions", "Atmospheric Chemistry and Physics", "Nuclear Materials and Energy", "NeuroImage: Clinical", "Frontiers in Neural Circuits", "Frontiers in Neuroanatomy", "Frontiers in Computational Neuroscience", "Frontiers in Human Neuroscience", "Frontiers in Synaptic Neuroscience", "Frontiers in Physics", "Frontiers in Physiology", "Frontiers in Psychology", "Frontiers in Aging Neuroscience", "Frontiers in Aging Neuroscience", "Frontiers in Aging Neuroscience", "Frontiers in Cellular Neuroscience", "Frontiers in Computational Neuroscience", "Frontiers in Human Neuroscience", "Frontiers in Neuroinformatics", "Frontiers in Physics", "Frontiers in Physics", "Frontiers in Plant Science", "International Journal of Photoenergy", "International Journal of Photoenergy", "BioMed Research International", "Materials Research Letters", "New Journal of Physics", "Atmosphere", "Polymers", "Molecules", "Molecules", "Nature Communications", "Optics Express", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS Computational Biology", "World Journal of Neuroscience", "Plant Methods", "Plant Methods", "BMC Cell Biology", "Materials Research Letters", "Microbial Biotechnology", "Microbial Biotechnology", "AIP Publishing", "Copernicus GmbH", "Elsevier BV", "Frontiers Media SA", "Hindawi Publishing Corporation", "Informa UK Limited", "IOP Publishing", "MDPI AG", "Nature Publishing Group", "Optical Society of America (OSA)", "Public Library of Science (PLoS)", "Scientific Research Publishing, Inc,", "Springer Science + Business Media", "Taylor & Francis", "Wiley-Blackwell" ],
"value": [ 1728.7,    600,    744,    792,    841,    864,    888,    928,   1008,   1008,   1073,   1073,   1080,   1102,   1104,   1189,   1200,   1200,   1247,   1248,   1272,   1276,   1276,   1392,   1421,   1537,   1653, 798.02, 1110.7,    800,    960,    960,    960,    960,    960,    960,    960,   1600,   1600,   1600,   1600,   1600,   1600,   1600,   1600,   1600,   1600, 889.92, 904.34, 1312.4,    417,   1349, 369.69, 981.99,   1080, 1347.6,   3700, 1381.9, 975.81,  980.6, 988.39, 989.32, 992.16, 993.41, 1008.5, 1050.8, 1059.5, 1066.9, 1777.6, 753.67,   1204,   1505,   1675,    375,   1554,   1554, 1728.7,  29016, 1908.7,  23520, 3106.6,    417,   1349, 3779.3,   3700, 1381.9,  11883, 753.67,   4384,    375,   3108 ] 
},
"nodeWidth":     15,
"nodePadding":      6,
"layout":      1,
"unit": "EURO",
"title": "Author fees paid by FZJ - ZB Publication Fund since 2013",
"id": "chart3ebc7280b6c4" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>

<h3 id="rub">Fees paid by Ruhr Universität Bochum</h3>

<div id = 'chart319c155f3f0a' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart319c155f3f0a",
"width":    960,
"height":    800,
"data": {
 "source": [ "Elsevier BV", "Hindawi Publishing Corporation", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Frontiers Media SA", "MDPI AG", "MDPI AG", "MDPI AG", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Bochum U", "Bochum U", "Bochum U", "Bochum U", "Bochum U", "Bochum U", "Bochum U" ],
"target": [ "Journal of Pediatric Surgery Case Reports", "BioMed Research International", "BMC Infectious Diseases", "BMC Cancer", "BMC Public Health", "BMC Musculoskeletal Disorders", "BMC Musculoskeletal Disorders", "BMC Dermatology", "Lipids in Health and Disease", "SpringerPlus", "BMC Psychiatry", "Proteome Science", "BMC Psychology", "PLoS Genetics", "PLoS ONE", "PLoS ONE", "PLoS ONE", "Frontiers in Psychology", "Membranes", "Membranes", "Polymers", "American Journal of Plant Sciences", "Open Journal of Pediatrics", "Open Journal of Pediatrics", "Open Journal of Pediatrics", "Elsevier BV", "Frontiers Media SA", "Hindawi Publishing Corporation", "MDPI AG", "Public Library of Science (PLoS)", "Scientific Research Publishing, Inc,", "Springer Science + Business Media" ],
"value": [ 365.23, 1560.5,   1212,   1600,   1280,   1240,   1216,   1280,   1280,   1044,   1280,   1280, 1594.6, 1996.8, 1155.6, 1278.5, 1312.9, 1142.4,  294.7, 296.15, 1177.2,  946.2, 597.73, 611.19, 647.24, 365.23, 1142.4, 1560.5, 1768.1, 5743.8, 2802.4,  14307 ] 
},
"nodeWidth":     15,
"nodePadding":      6,
"layout":      1,
"unit": "EURO",
"title": "Author fees paid by Bochum U Publication Fund since 2013",
"id": "chart319c155f3f0a" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>

<h3 id="tudresden">Fees paid by Technische Universität Dresden</h3>

<div id = 'chart3323534c1926' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart3323534c1926",
"width":    960,
"height":    800,
"data": {
 "source": [ "Wiley-Blackwell", "Elsevier BV", "Elsevier BV", "Nature Publishing Group", "Nature Publishing Group", "Nature Publishing Group", "AIP Publishing", "BMJ", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Dove Medical Press Ltd.", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "Informa UK Limited", "OMICS Publishing Group", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Copernicus GmbH", "Copernicus GmbH", "Resilience Alliance, Inc.", "TU Dresden", "TU Dresden", "TU Dresden", "TU Dresden", "TU Dresden", "TU Dresden", "TU Dresden", "TU Dresden", "TU Dresden", "TU Dresden", "TU Dresden", "TU Dresden", "TU Dresden", "TU Dresden", "TU Dresden", "TU Dresden" ],
"target": [ "Brain and Behavior", "Internet Interventions", "NeuroImage: Clinical", "Scientific Reports", "Scientific Reports", "Scientific Reports", "AIP Advances", "BMJ Open", "Case Reports in Medicine", "BioMed Research International", "Journal of Parasitology Research", "Case Reports in Neurological Medicine", "BioMed Research International", "BioMed Research International", "Evidence-Based Complementary and Alternative Medicine", "BioMed Research International", "Archaea", "BioMed Research International", "BioMed Research International", "BMC Evolutionary Biology", "BMC Family Practice", "BMC Family Practice", "BMC Cancer", "BMC Pediatrics", "BMC Public Health", "BMC Surgery", "BMC Medical Education", "Retrovirology", "Trials", "Trials", "Trials", "Journal of Occupational Medicine and Toxicology", "Journal of Occupational Medicine and Toxicology", "BMC Systems Biology", "Experimental & Translational Stroke Medicine", "International Journal of Bipolar Disorders", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "OncoTargets and Therapy", "Frontiers in Immunology", "Frontiers in Human Neuroscience", "Frontiers in Human Neuroscience", "Frontiers in Plant Science", "Frontiers in Psychology", "Frontiers in Psychology", "Frontiers in Psychology", "Frontiers in Psychology", "Forests", "Forests", "International Journal of Molecular Sciences", "Marine Drugs", "Marine Drugs", "Sensors", "Viruses", "Viruses", "Biomatter", "Journal of Veterinary Science & Technology", "Case Reports in Clinical Medicine", "Psychology", "Hydrology and Earth System Sciences Discussions", "Hydrology and Earth System Sciences Discussions", "Ecology and Society", "AIP Publishing", "BMJ", "Copernicus GmbH", "Dove Medical Press Ltd.", "Elsevier BV", "Frontiers Media SA", "Hindawi Publishing Corporation", "Informa UK Limited", "MDPI AG", "Nature Publishing Group", "OMICS Publishing Group", "Public Library of Science (PLoS)", "Resilience Alliance, Inc.", "Scientific Research Publishing, Inc,", "Springer Science + Business Media", "Wiley-Blackwell" ],
"value": [ 1808.8, 343.65, 1321.7, 1244.7, 933.55, 1244.7,   1178, 1006.7,    200, 1359.6, 918.78, 275.19,   1297, 1305.3, 879.27, 1305.3,    660, 1305.3, 1287.7, 1886.2, 1862.3,   1600,   1555,   1500,   1944,   1904,   1520, 1701.7, 1624.3,   1410,   1410,   1430,   1555, 1886.2, 1636.2,   1553, 1238.3, 1223.6, 1223.6,   1247,   1247, 1238.3, 1223.2, 1202.7, 1202.7,    875,    875, 875.13,    875, 1166.8, 1167.3, 1166.8,   1187, 1181.7,   1898,    850,  916.3,   1904, 1142.4,  916.3,   1904,    690, 1142.4,  288.5, 778.61, 1564.2, 1761.1,   1476,   1300,   1174, 1151.2, 970.46, 1582.9, 467.45, 615.49,    714, 1285.2, 1283.5,   1178, 1006.7, 1999.2,   1898, 1665.4, 9465.4,  10793, 970.46, 9493.7,   3423, 1582.9,  20416, 1283.5, 1082.9,  27978, 1808.8 ] 
},
"nodeWidth":     15,
"nodePadding":      6,
"layout":      1,
"unit": "EURO",
"title": "Author fees paid by TU Dresden Publication Fund since 2013",
"id": "chart3323534c1926" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>


<h3 id="unileipzig">Fees paid by Leipzig University open access publishing fund</h3>
    
    
<div id = 'chart6c03bf4370a' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart6c03bf4370a",
"width":    960,
"height":    800,
"data": {
 "value": [ 1914.3, 1332.8, 340.74, 6554.4, 2182.6, 411.45, 379.49, 1999.2, 3515.3,  21546, 1130.5,  35975, 976.22, 1344.7, 1344.7, 340.74, 1999.2, 976.22, 1914.3,   1741, 1774.3, 1062.5, 1120.1, 1130.5, 1597.9, 1678.8, 1508.9, 1470.8, 1508.9,   1447, 1719.2, 1513.7, 1251.9, 1518.4, 1213.8, 1420.9, 790.16, 1337.6, 1746.9, 1594.6, 1513.7, 1594.6, 1594.6, 1523.2, 1594.6, 1513.7, 1470.8, 1850.5, 1174.7, 1174.7,   1163,   1163, 1166.8, 1164.9, 1165.1, 1164.9, 1180.5, 1182.2, 1182.2, 1244.9, 1200.4, 1240.7,   1269, 1304.9, 1304.9, 1098.9,    800,   1904,    804, 1142.4,   1904, 411.45, 1332.8, 379.49 ],
"target": [ "AIP Publishing", "Co-Action Publishing", "Elsevier BV", "Frontiers Media SA", "Hindawi Publishing Corporation", "MDPI AG", "Medknow", "Nature Publishing Group", "Oxford University Press (OUP)", "Public Library of Science (PLoS)", "S. Karger AG", "Springer Science + Business Media", "Thieme Publishing Group", "Wiley-Blackwell", "Physiological Reports", "International Journal of Surgery Case Reports", "Cell Death Dis", "AJP Rep", "APL Mater.", "Genome Biology and Evolution", "Nucleic Acids Research", "Advances in Mathematical Physics", "BioMed Research International", "Obes Facts", "BMC Bioinformatics", "BMC Geriatr", "BMC Psychiatry", "BMC Public Health", "BMC Surgery", "Health and Quality of Life Outcomes", "Cell Commun Signal", "Theor Biol Med Model", "Trials", "Head & Face Medicine", "BMC Veterinary Research", "Patient Safety in Surgery", "BMC Research Notes", "J Biomed Sem", "Eur J Med Res", "BMC Bioinformatics", "BMC Genetics", "BMC Psychiatry", "BMC Biotechnology", "BMC Veterinary Research", "BMC Syst Biol", "Health and Quality of Life Outcomes", "Patient Safety in Surgery", "AMB Express", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "Frontiers in Marine Science", "Frontiers in Neuroanatomy", "Front. Hum. Neurosci.", "Front. Psychology", "Front. Psychology", "Metabolites", "European Journal of Psychotraumatology", "Surg Neurol Int" ],
"source": [ "Leipzig U", "Leipzig U", "Leipzig U", "Leipzig U", "Leipzig U", "Leipzig U", "Leipzig U", "Leipzig U", "Leipzig U", "Leipzig U", "Leipzig U", "Leipzig U", "Leipzig U", "Leipzig U", "Wiley-Blackwell", "Elsevier BV", "Nature Publishing Group", "Thieme Publishing Group", "AIP Publishing", "Oxford University Press (OUP)", "Oxford University Press (OUP)", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "S. Karger AG", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "MDPI AG", "Co-Action Publishing", "Medknow" ] 
},
"nodeWidth":     15,
"nodePadding":     10,
"layout":     32,
"unit": "EURO",
"title": "Author fees paid by Leipzig U open access publishing fund",
"id": "chart6c03bf4370a" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>


<h3 id ="unibamberg">Fees paid by University of Bamberg</h3>

<div id = 'chart56c63b397f5' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart56c63b397f5",
"width":    960,
"height":    800,
"data": {
 "source": [ "Dove Medical Press Ltd.", "Education & Psychology I+D+i", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "JMIR Publications Inc.", "Lifescience Global", "Pion Ltd", "Pion Ltd", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Sciedu Press", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U", "Bamberg U" ],
"target": [ "Journal of Pain Research", "Electronic Journal of Research in Educational Psychology", "Frontiers in Human Neuroscience", "Frontiers in Psychology", "Frontiers in Psychology", "Frontiers in Psychology", "Journal of Medical Internet Research", "International Journal of Criminology and Sociology", "i-Perception", "i-Perception", "PLoS ONE", "PLoS ONE", "International Journal of Higher Education", "BMC Neuroscience", "BMC Neurology", "Health and Quality of Life Outcomes", "Academic Journals (Sapele, Nigeria/Nairobi, Kenya)", "Academy and Industry Research Collaboration Center (AIRCC)", "Acta Dermato-Venereologica", "AIP Publishing", "American Mathematical Society (AMS)", "American Physical Society (APS)", "American Vacuum Society", "Amsterdam University Press", "Association for Research in Vision and Ophthalmology (ARVO)", "Baishideng Publishing Group Co., Limited (formerly WJG Press)", "BMJ", "Cambridge University Press (CUP)", "Canadian Center of Science and Education", "Co-Action Publishing", "Copernicus GmbH", "Dove Medical Press Ltd.", "e-Century Publ. Corp.", "Education & Psychology I+D+i", "Elsevier", "Elsevier BV", "EMBO", "Environmental Health Perspectives", "ESG", "Food Science Publisher", "Frontiers Media SA", "Genetics Society of America", "Hindawi Publishing Corporation", "IGIP", "Impact Journals LLC", "Informa UK Limited", "Institute of Electrical & Electronics Engineers (IEEE)", "InTech", "International Scientific Literature", "International Union of Crystallography (IUCr)", "IOP", "IOP Publishing", "Ivyspring International Publisher", "JMIR Publications Inc.", "KIT Scientific Publishing", "Lifescience Global", "MDPI AG", "Medknow", "Nature Publishing Group", "OMICS Publishing Group", "Optical Society of America (OSA)", "Oxford University Press (OUP)", "PAGEPress Publications", "Pensoft Publishers", "Pion Ltd", "Portland Press Ltd.", "Public Library of Science (PLoS)", "S. Karger AG", "SAGE Publications", "Schweizerbart", "Sciedu Press", "Scientific Research Publishing, Inc,", "Society for Neuroscience", "Springer Science + Business Media", "Taylor & Francis", "The Feinstein Institute for Medical Research (North Shore LIJ Research Institute)", "Thieme Publishing Group", "Ubiquity Press, Ltd.", "Univ. of Buckingham Pr.", "Walter de Gruyter GmbH", "Wiley-Blackwell" ],
"value": [   1372,     90,    960,    960,    960,    960, 1569.9,    182, 405.79, 380.74, 1019.3, 1022.8, 229.61,   2010,   1890,   1920, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null,   1372, null,     90, null, null, null, null, null, null,   3840, null, null, null, null, null, null, null, null, null, null, null, null, 1569.9, null,    182, null, null, null, null, null, null, null, null, 786.53, null, 2042.1, null, null, null, 229.61, null, null,   5820, null, null, null, null, null, null, null ] 
},
"nodeWidth":     15,
"nodePadding":      6,
"layout":      1,
"unit": "EURO",
"title": "Author fees paid by Bamberg U Publication Fund since 2013",
"id": "chart56c63b397f5" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>

<h3 id ="unigoe">Fees paid by State and University Library Göttingen</h3>

<div id = 'chart287b3fe2961e' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart287b3fe2961e",
"width":    960,
"height":    800,
"data": {
 "source": [ "Wiley-Blackwell", "AIP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP", "IOP Publishing", "Oxford University Press (OUP)", "BMJ", "Hindawi Publishing Corporation", "Association for Research in Vision and Ophthalmology (ARVO)", "SAGE Publications", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "BioMed Central", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "MDPI AG", "MDPI AG", "MDPI, Basel", "Informa UK Limited", "OMICS Publishing Group", "OMICS Publishing Group", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Canadian Center of Science and Education", "Canadian Center of Science and Education", "Academic Journals (Sapele, Nigeria/Nairobi, Kenya)", "Impact Journals LLC", "Goettingen U", "Goettingen U", "Goettingen U", "Goettingen U", "Goettingen U", "Goettingen U", "Goettingen U", "Goettingen U", "Goettingen U", "Goettingen U", "Goettingen U", "Goettingen U", "Goettingen U", "Goettingen U", "Goettingen U", "Goettingen U", "Goettingen U", "Goettingen U", "Goettingen U", "Goettingen U", "Goettingen U", "Goettingen U" ],
"target": [ "Ecology and Evolution", "AIP Advances", "New Journal of Physics", "New Journal of Physics", "New Journal of Physics", "New Journal of Physics", "New Journal of Physics", "New Journal of Physics", "New Journal of Physics", "Nucleic Acids Research", "BMJ Open", "Clinical and Developmental Immunology", "Journal of Vision", "Journal of Dental Biomechanics", "Genetics Selection Evolution", "BMC Developmental Biology", "BMC Developmental Biology", "BMC Evolutionary Biology", "BMC Evolutionary Biology", "BMC Evolutionary Biology", "BMC Evolutionary Biology", "BMC Genomics", "BMC Genomics", "BMC Microbiology", "BMC Plant Biology", "BMC Family Practice", "BMC Gastroenterology", "BMC Neurology", "BMC Neurology", "BMC Neurology", "BMC Pulmonary Medicine", "BMC Urology", "BMC Urology", "BMC Oral Health", "BMC Clinical Pathology", "Microbial Cell Factories", "Journal of Translational Medicine", "BMC Medicine", "Journal of Neuroinflammation", "Retrovirology", "Frontiers in Zoology", "Diagnostic Pathology", "Diagnostic Pathology", "Journal of Ethnobiology and Ethnomedicine", "Plant Methods", "Cell Division", "Philosophy, Ethics, and Humanities in Medicine", "Philosophy, Ethics, and Humanities in Medicine", "Substance Abuse Treatment, Prevention, and Policy", "Algorithms for Molecular Biology", "Journal of Cardiothoracic Surgery", "Journal of Cardiothoracic Surgery", "Journal of Cardiothoracic Surgery", "Journal of Cardiothoracic Surgery", "Journal of Cardiothoracic Surgery", "Journal of Cardiothoracic Surgery", "Journal of Cardiothoracic Surgery", "Journal of Cardiothoracic Surgery", "Journal of Cardiothoracic Surgery", "Journal of Cardiothoracic Surgery", "Acta Veterinaria Scandinavica", "Acta Veterinaria Scandinavica", "Journal of Medical Case Reports", "Journal of Neurodevelopmental Disorders", "Acta Neuropathologica Communications", "SpringerPlus", "Complex Adaptive Systems Modeling", "Critical Care", "PLoS Biology", "PLoS Genetics", "PLoS Genetics", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "Frontiers in Cellular Neuroscience", "Frontiers in Neural Circuits", "Frontiers in Computational Neuroscience", "Frontiers in Human Neuroscience", "Frontiers in Plant Science", "Frontiers in Plant Science", "Frontiers in Plant Science", "Frontiers in Plant Science", "Frontiers in Plant Science", "Frontiers in Plant Science", "Diversity", "Molecules", "Sustainibility. Special Issue: Sustainability in Education: a Critical Reappraisal of Practice and Purpose", "Communicative & Integrative Biology", "Journal of Addiction Research & Therapy", "Journal of Clinical & Experimental Cardiology", "Advances in Bioscience and Biotechnology", "Advances in Bioscience and Biotechnology", "Biogeosciences", "Biogeosciences", "Biogeosciences", "Biogeosciences Discussions", "Biogeosciences Discussions", "Climate of the Past Discussions", "Hydrology and Earth System Sciences", "Journal of Sustainable Development", "Journal of Sustainable Development", "International Journal of Biodiversity and Conservation", "OncoTarget", "Academic Journals (Sapele, Nigeria/Nairobi, Kenya)", "AIP Publishing", "Association for Research in Vision and Ophthalmology (ARVO)", "BioMed Central", "BMJ", "Canadian Center of Science and Education", "Copernicus GmbH", "Frontiers Media SA", "Hindawi Publishing Corporation", "Impact Journals LLC", "Informa UK Limited", "IOP", "IOP Publishing", "MDPI AG", "MDPI, Basel", "OMICS Publishing Group", "Oxford University Press (OUP)", "Public Library of Science (PLoS)", "SAGE Publications", "Scientific Research Publishing, Inc,", "Springer Science + Business Media", "Wiley-Blackwell" ],
"value": [ 1332.8, 1025.8, 1055.2, 1338.9, 1338.9, 1001.4, 1094.1, 1178.1, 1321.1, 1267.3, 1902.2, 1295.9,   1662, 1389.9, 1128.1, 1461.3, 1451.8, 1442.3, 1442.3, 1442.3, 1470.8, 1494.6, 1542.2, 1442.3,   1428, 1437.5, 1442.3, 1442.3, 1466.1, 1542.2, 1456.6, 1504.2, 1542.2, 1437.5, 1466.1, 1247.1, 1542.2, 1723.1,   1566, 1299.5, 1556.5, 1232.8, 1285.2, 1285.2, 1270.9, 1404.2, 1228.1, 1151.9, 1223.3, 1285.2, 1375.6,   1566, 1475.6, 1442.3, 1337.6,   1447, 1351.8,   1566, 1347.1, 1356.6, 1551.8, 1466.1, 742.56, 1556.5,    952,  809.2, 799.68, 1542.2, 2521.4, 1804.9, 1860.2, 1105.3, 1105.3, 1113.3, 1114.3, 1114.7, 1121.5,   1106, 1119.2, 1111.5, 1051.8, 1046.5, 1114.8,   1239, 1091.2, 1011.9, 1242.7, 1106.2, 1212.1, 1186.4, 1186.4,   1074, 1192.1, 1192.1, 1173.7, 1173.7, 1173.8, 1142.4,   1904, 1142.4, 1142.4, 1142.4, 684.25, 1142.4, 1142.4,   2380, 1142.4,    481, 1741.6, 779.95, 466.49, 812.37, 845.92, 718.27, 727.77, 1794.5, 931.77, 1069.8, 1207.8, 1242.4, 1345.9, 1000.8,  304.6, 300.46, 491.62, 1617.2, 491.62, 1025.8,   1662, 1347.1, 1902.2, 605.06,   8593,  12965, 1295.9, 1617.2, 466.49, 1178.1, 7149.7, 2222.6, 779.95, 1658.3, 1267.3,  35666, 1389.9,   1446,  73123, 1332.8 ] 
},
"nodeWidth":     15,
"nodePadding":      6,
"layout":      1,
"unit": "EURO",
"title": "Author fees paid by Goettingen U Publication Fund since 2013",
"id": "chart287b3fe2961e" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>

<h3 id="unikonstanz">Fees paid by Open-Access-Fonds University of Konstanz 2012 - 2013</h3>

<div id = 'chart165b7b466f79' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart165b7b466f79",
"width":    960,
"height":    720,
"data": {
 "value": [ 136.57, null, null, null, null, null, null, null,  928.2, null, null, null, null, 1314.5, null, null,  18517, 1803.7, 2445.4, null, null, null, 1523.2, null, null, 1178.1, null, null, null, null, null, 1244.7, null, 9367.1, 2451.4, null,  523.6, null,  30118, null, null, 770.78, null,  34955, null, 499.13, null, null, null, null, null, 1225.7, 1518.7, 466.67, 1451.8, 1489.9, 1270.9, 1280.4, 1266.2, 1466.1, 1437.5, 1437.5, 661.64, 1314.5, 1564.8, 931.89, 997.22, 1697.3, 1281.3, 1244.9, 1234.9, 1307.8, 1341.7, 1308.5, 1323.7, 1267.8, 1296.4, 1302.5, 1258.2,   1091,   1924, 1733.6, 1142.4, 136.57,  761.6,  761.6, 1244.7, 1178.1, 1225.7, 460.01, 1182.4, 1451.8, 1542.2, 1494.6,   1447, 1461.3,   1447, 1451.8, 1542.2, 1542.2, 1466.1, 1451.8,  642.6, 1232.8, 1285.2, 1280.4, 1270.9, 919.95, 1559.2, 1696.8,   1257,   1257, 1243.9, 1240.4, 1256.6, 1258.3, 1249.2, 1212.3, 1186.8, 1166.8, 1210.4, 1206.2, 1204.8, 1803.7,   1904,   1924,   1904, 1142.4,   1924,   1904,   1924,  928.2,  523.6, 499.13, 385.39, 385.39 ],
"target": [ "Academy and Industry Research Collaboration Center (AIRCC)", "AIP Publishing", "American Physical Society (APS)", "American Vacuum Society", "Amsterdam University Press", "Association for Research in Vision and Ophthalmology (ARVO)", "Baishideng Publishing Group Co., Limited (formerly WJG Press)", "Canadian Center of Science and Education", "Co-Action Publishing", "Copernicus GmbH", "e-Century Publ. Corp.", "Elsevier BV", "EMBO", "Environmental Health Perspectives", "ESG", "Food Science Publisher", "Frontiers Media SA", "Genetics Society of America", "Hindawi Publishing Corporation", "IGIP", "Informa UK Limited", "Institute of Electrical & Electronics Engineers (IEEE)", "InTech", "International Scientific Literature", "International Union of Crystallography (IUCr)", "IOP Publishing", "Ivyspring International Publisher", "JMIR Publications Inc.", "KIT Scientific Publishing", "MDPI AG", "Medknow", "Nature Publishing Group", "OMICS Publishing Group", "Optical Society of America (OSA)", "Oxford University Press (OUP)", "PAGEPress Publications", "Pensoft Publishers", "Portland Press Ltd.", "Public Library of Science (PLoS)", "Schweizerbart", "Sciedu Press", "Scientific Research Publishing, Inc,", "Society for Publication of Acta Dermato-Venereologica ", "Springer Science + Business Media", "The Feinstein Institute for Medical Research (North Shore LIJ Research Institute)", "The Genomic Standards Consortium", "Thieme Publishing Group", "Ubiquity Press, Ltd.", "Univ. of Buckingham Pr.", "Walter de Gruyter GmbH", "Wiley-Blackwell", "Genome Biology and Evolution", "Oxidative Medicine and Cellular Longevity", "Education Research International", "BMC Genomics", "BMC Plant Biology", "BMC Plant Biology", "BMC Psychiatry", "BMC Psychiatry", "BMC Public Health", "BMC Public Health", "BMC Public Health", "BMC Research Notes", "Environ Health Perspect", "Opt. Express", "Opt. Express", "Opt. Express", "Opt. Express", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "Front. Hum. Neurosci.", "Front. Psychology", "Front. Psychology", "Front. Psychology", "IJCNC", "Principal Component Analysis - Multidisciplinary Applications", "Glucocorticoids - New Recognition of Our Familiar Friend", "Scientific Reports", "New J. Phys.", "Genome Biology and Evolution", "ISRN High Energy Physics", "BMC Bioinformatics", "BMC Cell Biology", "BMC Evol Biol", "BMC Evol Biol", "BMC Evol Biol", "BMC Genomics", "BMC Genomics", "BMC Pediatrics", "BMC Public Health", "BMC Public Health", "BMC Public Health", "BMC Ecol", "Fixed Point Theory Appl", "Subst Abuse Treat Prev Policy", "Conflict and Health", "Conflict and Health", "Conflict and Health", "Opt. Express", "Opt. Express", "Opt. Express", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "G3&#58; Genes|Genomes|Genetics", "Frontiers in Behavioral Neuroscience", "Front. Psychology", "Front. Psychology", "Front. Psychology", "Front. Psychology", "Front. Psychology", "Front. Psychology", "European Journal of Psychotraumatology", "NEOBIOTA", "Stand. Genomic Sci.", "OJApo", "Open Journal of Modern Linguistics" ],
"source": [ "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Universität Konstanz", "Oxford University Press (OUP)", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Environmental Health Perspectives", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Academy and Industry Research Collaboration Center (AIRCC)", "InTech", "InTech", "Nature Publishing Group", "IOP Publishing", "Oxford University Press (OUP)", "Hindawi Publishing Corporation", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Genetics Society of America", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Co-Action Publishing", "Pensoft Publishers", "The Genomic Standards Consortium", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc," ] 
},
"nodeWidth":     20,
"nodePadding":      6,
"layout":     16,
"unit": "EURO",
"title": "Author fees paid by University of Konstanz Fund since 2012",
"id": "chart165b7b466f79" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>

<h3 id="unidue">Fees paid by Open-Access-Fonds University of Duisburg-Essen 2013</h3>

<div id = 'chart56c23bd88f6' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart56c23bd88f6",
"width":    960,
"height":    800,
"data": {
 "source": [ "AIP Publishing", "Amsterdam University Press", "Elsevier BV", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Institute of Electrical & Electronics Engineers (IEEE)", "International Scientific Literature", "IOP Publishing", "IOP Publishing", "JMIR Publications Inc.", "MDPI AG", "MDPI AG", "Nature Publishing Group", "Nature Publishing Group", "Oxford University Press (OUP)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Sciedu Press", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Thieme Publishing Group", "Univ. of Buckingham Pr.", "Elsevier BV", "IOP Publishing", "Wiley-Blackwell", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Frontiers Media SA", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U", "Duisburg-Essen U" ],
"target": [ "AIP Advances", "Taal en tongval", "New Microbes and New Infections", "Frontiers in Oncology", "Frontiers in Oncology", "Frontiers in Oncology", "Mediators of Inflammation", "Disease Markers", "Journal of Immunology Research", "IEEE Access", "Annals of Transplantation", "New Journal of Physics", "New Journal of Physics", "Journal of Medical Internet Research", "International Journal of Molecular Sciences", "International Journal of Molecular Sciences", "Modern Pathology", "Scientific Reports", "Nucleic Acids Research", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS Pathogens", "PLoS Pathogens", "PLoS Pathogens", "International Journal of Financial Research", "Journal of Inequalities and Applications", "The Journal of Headache and Pain", "The Journal of Headache and Pain", "The Journal of Headache and Pain", "The Journal of Headache and Pain", "BMC Gastroenterology", "BMC Gastroenterology", "BMC Neurology", "BMC Neurology", "BMC Cancer", "BMC Ophthalmology", "BMC Pediatrics", "BMC Psychiatry", "BMC Psychiatry", "BMC Musculoskeletal Disorders", "BMC Complementary and Alternative Medicine", "BMC Complementary and Alternative Medicine", "Molecular Cancer", "World Journal of Surgical Oncology", "World Journal of Surgical Oncology", "World Journal of Surgical Oncology", "World Journal of Surgical Oncology", "World Journal of Surgical Oncology", "Retrovirology", "Retrovirology", "Retrovirology", "Frontiers in Zoology", "Frontiers in Zoology", "Virology Journal", "Virology Journal", "Virology Journal", "Behavioral and Brain Functions", "Diagnostic Pathology", "Radiation Oncology", "Radiation Oncology", "Radiation Oncology", "Radiation Oncology", "Radiation Oncology", "Orphanet Journal of Rare Diseases", "Orphanet Journal of Rare Diseases", "Orphanet Journal of Rare Diseases", "Orphanet Journal of Rare Diseases", "Orphanet Journal of Rare Diseases", "Journal of Medical Case Reports", "BioData Mining", "BMC Research Notes", "Parasites & Vectors", "Parasites & Vectors", "Parasites & Vectors", "European Journal of Medical Research", "EJNMMI Research", "SpringerPlus", "SpringerPlus", "SpringerPlus", "Critical Care", "Critical Care", "Journal of Cheminformatics", "Stem Cell Research & Therapy", "American Journal of Perinatology Reports", "Hypothesis in the Life Sciences ", "Results in Pharma Sciences", "New Journal of Physics", "Microbial Biotechnology", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "Frontiers in Psychology", "Academic Journals (Sapele, Nigeria/Nairobi, Kenya)", "Academy and Industry Research Collaboration Center (AIRCC)", "Acta Dermato-Venereologica", "AIP Publishing", "American Mathematical Society (AMS)", "American Physical Society (APS)", "American Vacuum Society", "Amsterdam University Press", "Association for Research in Vision and Ophthalmology (ARVO)", "Baishideng Publishing Group Co., Limited (formerly WJG Press)", "BMJ", "Cambridge University Press (CUP)", "Canadian Center of Science and Education", "Co-Action Publishing", "Copernicus GmbH", "Dove Medical Press Ltd.", "e-Century Publ. Corp.", "Education & Psychology I+D+i", "Elsevier", "Elsevier BV", "EMBO", "Environmental Health Perspectives", "ESG", "Food Science Publisher", "Frontiers Media SA", "Genetics Society of America", "Hindawi Publishing Corporation", "IGIP", "Impact Journals LLC", "Informa UK Limited", "Institute of Electrical & Electronics Engineers (IEEE)", "InTech", "International Scientific Literature", "International Union of Crystallography (IUCr)", "IOP", "IOP Publishing", "Ivyspring International Publisher", "JMIR Publications Inc.", "KIT Scientific Publishing", "Lifescience Global", "MDPI AG", "Medknow", "Nature Publishing Group", "OMICS Publishing Group", "Optical Society of America (OSA)", "Oxford University Press (OUP)", "PAGEPress Publications", "Pensoft Publishers", "Pion Ltd", "Portland Press Ltd.", "Public Library of Science (PLoS)", "S. Karger AG", "SAGE Publications", "Schweizerbart", "Sciedu Press", "Scientific Research Publishing, Inc,", "Society for Neuroscience", "Springer Science + Business Media", "Taylor & Francis", "The Feinstein Institute for Medical Research (North Shore LIJ Research Institute)", "Thieme Publishing Group", "Ubiquity Press, Ltd.", "Univ. of Buckingham Pr.", "Walter de Gruyter GmbH", "Wiley-Blackwell" ],
"value": [   1206,    238,    827,   1143,    960,   1143,    559,   1157,   1135,   1283,    385,    990,    608,   1118,   1323,   1555,    990,   1245,   1982,   1377,   1377,   1377,   1377,   1377,   1377,   1377,   1377,   1016,    994,    999,    981,   1210,   1192,   1192,   1201,   1195,   1189,    981,   1211,   1212,   1238,   1025,   1737,   1634,   1657,    243,    540,   1000,   1000,   1064,   1064,   1236,   1212,   1216,   1216,   1196,   1212,   1272,   1236,   1212,   1200,   1296,   1212,   1200,   1256,   1296,   1296,   1296,   1216,   1064,   1068,   1140,   1316,   1308,   1252,   1244,   1216,   1268,   1056,   1044,   1096,   1080,   1032,   1686,   1188,   1180,   1180,   1180,   1408,    584,   1124,    680,   1104,   1152,   1160,   1392,    924,    680,    696,    696,   1212,   1212,   1128,   1240,    762,    909,   1710,   1080,   1803,   1247,    988,    988,    998,   1600, null, null, null,   1206, null, null, null,    238, null, null, null, null, null, null, null, null, null, null, null,   2537, null, null, null, null,   4846, null,   2851, null, null, null,   1283, null,    385, null, null,   2678, null,   1118, null, null,   2878, null,   2235, null, null,   1982, null, null, null, null,  37101, null, null, null,    243, null, null,  65934, null, null,    762, null,    909, null,   1803 ] 
},
"nodeWidth":     15,
"nodePadding":      6,
"layout":      1,
"unit": "EURO",
"title": "Author fees paid by Duisburg-Essen U Publication Fund since 2013",
"id": "chart56c23bd88f6" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>

<h3 id="unih">Fees paid by Leibniz Universität Hannover Publication Fund  since 2013</h3>


<div id = 'chart7b0189ceb12' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart7b0189ceb12",
"width":    960,
"height":    800,
"data": {
 "source": [ "Portland Press Ltd.", "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "Schweizerbart", "Schweizerbart", "Hindawi Publishing Corporation", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "OMICS Publishing Group", "Scientific Research Publishing, Inc,", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Dundee Science Press", "Hannover U", "Hannover U", "Hannover U", "Hannover U", "Hannover U", "Hannover U", "Hannover U", "Hannover U", "Hannover U", "Hannover U", "Hannover U", "Hannover U", "Hannover U" ],
"target": [ "Bioscience Reports", "New Journal of Physics", "New Journal of Physics", "New Journal of Physics", "New Journal of Physics", "New Journal of Physics", "Meteorologische Zeitschrift", "Meteorologische Zeitschrift", "International Journal of Photoenergy", "BMC Evolutionary Biology", "BMC Genomics", "BMC Health Services Research", "Health Economics Review", "Biomedical Optics Express", "Optics Express", "Optics Express", "Optics Express", "Optics Express", "Optics Express", "Optics Express", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "Frontiers in Plant Science", "Frontiers in Plant Science", "Frontiers in Plant Science", "Frontiers in Plant Science", "Frontiers in Plant Science", "Frontiers in Plant Science", "Frontiers in Plant Science", "Frontiers in Plant Science", "Diversity", "Sensors", "Sensors", "Sustainability", "Sustainability", "Viruses", "Water", "Journal of Physical Chemistry & Biophysics", "International Journal of Geosciences", "Atmospheric Measurement Techniques Discussions", "Atmospheric Measurement Techniques Discussions", "Biogeosciences Discussions", "Geoscientific Model Development Discussions", "Natural Hazards and Earth System Sciences Discussions", "Natural Hazards and Earth System Sciences Discussions", "BioDiscovery", "Copernicus GmbH", "Dundee Science Press", "Frontiers Media SA", "Hindawi Publishing Corporation", "IOP Publishing", "MDPI AG", "OMICS Publishing Group", "Optical Society of America (OSA)", "Portland Press Ltd.", "Public Library of Science (PLoS)", "Schweizerbart", "Scientific Research Publishing, Inc,", "Springer Science + Business Media" ],
"value": [    930, 1178.1, 1178.1, 1178.1, 1456.6, 1113.8,   1568,   1568, 1132.1, 1874.2,   1904, 1993.2, 1017.5, 1209.3, 1361.2, 1616.7, 1638.5, 1366.3, 1442.3,   1936,   1241, 1213.7, 1223.8, 1256.9, 1238.4, 1385.8, 1142.4, 1142.4, 1142.4, 1142.4,   1904, 1523.2, 1142.4, 1142.4, 894.92, 1765.1, 1755.2,  765.1, 779.89,   1158,  991.2, 1150.1,  533.8,  999.6, 828.24,   1622,   2000, 756.84, 802.93, 601.47, 7009.6, 601.47,  10282, 1132.1, 6104.7, 8109.4, 1150.1,  10570,    930, 7559.5,   3136,  533.8, 6788.9 ] 
},
"nodeWidth":     15,
"nodePadding":      6,
"layout":      1,
"unit": "EURO",
"title": "Author fees paid by Hannover U Publication Fund since 2013",
"id": "chart7b0189ceb12" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>
          <h3 id="unibayreuth">Fees paid by Bayreuth University Publication Fund between 2012 and 2014</h3>

          <div id = 'chart1c95821e598' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart1c95821e598",
"width":    960,
"height":    800,
"data": {
 "source": [ "Wiley-Blackwell", "Nature Publishing Group", "Nature Publishing Group", "Portland Press Ltd.", "IOP Publishing", "IOP Publishing", "IOP Publishing", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "International Mountain Society (IMS) and United Nations University", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "Pensoft Publishers", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Sciedu Press", "Canadian Center of Science and Education", "Academic Journals", "Academic Journals", "Sciencedomain International", "Impact Journals LLC", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U", "Bayreuth U" ],
"target": [ "Ecology and Evolution", "Scientific Reports", "Scientific Reports", "Bioscience Reports", "New Journal of Physics", "New Journal of Physics", "New Journal of Physics", "BMC Genomics", "BMC Microbiology", "BMC Neurology", "BMC Public Health", "BMC Biology", "BMC Neurology", "Health Economics Review", "Movement Ecology", "PLoS Genetics", "PLoS Genetics", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "Mountain Research and Development", "Frontiers in Microbiology", "Frontiers in Plant Science", "Frontiers in Plant Science", "Chemosensors", "Energies", "Forests", "International Journal of Environmental Research and Public Health", "Materials", "Molecules", "Remote Sensing", "Sensors", "Sensors", "Sensors", "Sensors", "MycoKeys", "American Journal of Industrial and Business Management", "American Journal of Industrial and Business Management", "Creative Education", "Atmospheric Chemistry and Physics Discussions", "Atmospheric Chemistry and Physics Discussions", "Atmospheric Measurement Techniques Discussions", "Atmospheric Measurement Techniques Discussions", "Atmospheric Measurement Techniques Discussions", "Atmospheric Measurement Techniques Discussions", "Biogeosciences Discussions", "Biogeosciences Discussions", "Biogeosciences Discussions", "Biogeosciences Discussions", "Biogeosciences Discussions", "World Journal of Education", "International Business Research", "African Journal of Agricultural Research", "African Journal of Political Science and International Relations", "British Journal of Economics, Management & Trade", "Aging", "Academic Journals", "Academic Journals (Sapele, Nigeria/Nairobi, Kenya)", "Academy and Industry Research Collaboration Center (AIRCC)", "Acta Dermato-Venereologica", "AIP Publishing", "American Mathematical Society (AMS)", "American Physical Society (APS)", "American Vacuum Society", "Amsterdam University Press", "Association for Research in Vision and Ophthalmology (ARVO)", "Baishideng Publishing Group Co., Limited (formerly WJG Press)", "BioMed Central", "BMJ", "Cambridge University Press (CUP)", "Canadian Center of Science and Education", "Co-Action Publishing", "Copernicus GmbH", "Dove Medical Press Ltd.", "e-Century Publ. Corp.", "Education & Psychology I+D+i", "Elsevier BV", "EMBO", "Environmental Health Perspectives", "ESG", "European Optical Society", "Food Science Publisher", "Frontiers Media SA", "Genetics Society of America", "Hindawi Publishing Corporation", "IGIP", "Impact Journals LLC", "Informa UK Limited", "Institute of Electrical & Electronics Engineers (IEEE)", "InTech", "International Mountain Society (IMS) and United Nations University", "International Scientific Literature", "International Union of Crystallography (IUCr)", "IOP", "IOP Publishing", "Ivyspring International Publisher", "JMIR Publications Inc.", "KIT Scientific Publishing", "Lifescience Global", "MDPI AG", "MDPI, Basel", "Medknow", "Nature Publishing Group", "OMICS Publishing Group", "Optical Society of America (OSA)", "Oxford University Press (OUP)", "PAGEPress Publications", "Pensoft Publishers", "Pion Ltd", "Portland Press Ltd.", "Public Library of Science (PLoS)", "S. Karger AG", "SAGE Publications", "Schweizerbart", "Sciedu Press", "Sciencedomain International", "Scientific Research Publishing, Inc,", "Sciknow Publications", "Society for Neuroscience", "Springer Science + Business Media", "Taylor & Francis", "The Feinstein Institute for Medical Research (North Shore LIJ Research Institute)", "Thieme Publishing Group", "Ubiquity Press, Ltd.", "Univ. of Buckingham Pr.", "Walter de Gruyter GmbH", "Wiley-Blackwell" ],
"value": [ 1332.8, 1244.7,   1046,   1000,    990,    990,    990,   1926,   1585,   1615, 1951.6,   1875, 1969.5,   1065, 1969.5, 1734.4, 1656.6, 993.09, 1000.8, 995.65, 991.12, 447.18,    960,    960,   1904,    205, 1177.6, 783.66, 1371.2, 1374.6, 1478.9,   1200, 1478.9, 1482.6, 1463.9, 1772.9,    180, 468.42, 392.96, 390.59, 1104.3, 1414.9, 828.24, 793.73, 1085.3, 1380.4,   1200,   1300,   1200, 1035.3, 1967.1, 232.16, 226.25, 435.41, 476.56,  81.86,   1343, 911.97, null, null, null, null, null, null, null, null, null, null, null, null, null, 226.25, null,  13309, null, null, null, null, null, null, null, null, null,   3824, null, null, null,   1343, null, null, null, 447.18, null, null, null,   2970, null, null, null, null,  13789, null, null, 2290.7, null, null, null, null,    180, null,   1000, 7371.6, null, null, null, 232.16,  81.86,   1252, null, null,  13957, null, null, null, null, null, null, 1332.8 ] 
},
"nodeWidth":     15,
"nodePadding":      6,
"layout":      1,
"unit": "EURO",
"title": "Author fees paid by Bayreuth U Publication Fund since 2013",
"id": "chart1c95821e598" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>

<h3 id="kassel"> Fess paid by the University of Kassel</h3>

<div id = 'chart3ebc61dbfad9' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart3ebc61dbfad9",
"width":    960,
"height":    800,
"data": {
 "source": [ "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "American Physical Society (APS)", "Springer Science + Business Media", "Gesellschaft für Erdkunde zu Berlin", "Optical Society of America (OSA)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Shared Science Publishers OG", "European Optical Society", "Frontiers Media SA", "Frontiers Media SA", "MDPI AG", "Botanical Society of America", "International Food and Agribusiness Management Association", "ESci Journals Publishing", "Kassel U", "Kassel U", "Kassel U", "Kassel U", "Kassel U", "Kassel U", "Kassel U", "Kassel U", "Kassel U", "Kassel U", "Kassel U", "Kassel U", "Kassel U" ],
"target": [ "New Journal of Physics", "New Journal of Physics", "New Journal of Physics", "New Journal of Physics", "New Journal of Physics", "New Journal of Physics", "New Journal of Physics", "New Journal of Physics", "Physical Review X", "Genetics Selection Evolution", "DIE ERDE: Journal of the Geographical Society of Berlin", "Optics Express", "PLoS ONE", "PLoS ONE", "PLoS ONE", "Microbial Cell", "Journal of the European Optical Society: Rapid Publications", "Frontiers in Psychology", "Frontiers in Psychology", "Sustainability", "Applications in Plant Sciences", "International Food and Agribusiness Management Review", "Journal of Pro Poor Growth", "American Physical Society (APS)", "Botanical Society of America", "ESci Journals Publishing", "European Optical Society", "Frontiers Media SA", "Gesellschaft für Erdkunde zu Berlin", "International Food and Agribusiness Management Association", "IOP Publishing", "MDPI AG", "Optical Society of America (OSA)", "Public Library of Science (PLoS)", "Shared Science Publishers OG", "Springer Science + Business Media" ],
"value": [   1059,   1156,   1059,   1059,   1002,   1156,   1156,   1156,   1354,   1434,    250,   1700,   1241,   1025,   1417,    607,    440,   1142,   1036,   1374,    236,    672,    155,   1354,    236,    155,    440,   2178,    250,    672,   8803,   1374,   1700,   3683,    607,   1434 ] 
},
"nodeWidth":     15,
"nodePadding":      6,
"layout":      1,
"unit": "EURO",
"title": "Author fees paid by Kassel U Publication Fund since 2013",
"id": "chart3ebc61dbfad9" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>

<h3 id="tudortmund">Fees paid by Technische Universität Dortmund</h3>

<div id = 'chart332329073883' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart332329073883",
"width":    960,
"height":    500,
"data": {
 "source": [ "International Union of Crystallography (IUCr)", "Springer Science + Business Media", "Optical Society of America (OSA)", "Public Library of Science (PLoS)", "Frontiers Media SA", "MDPI AG", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "IGITUR, UTRECHT PUBLISHING & ARCHIVING SERVICES", "Dortmund TU", "Dortmund TU", "Dortmund TU", "Dortmund TU", "Dortmund TU", "Dortmund TU", "Dortmund TU", "Dortmund TU" ],
"target": [ "Acta Crystallographica Section E Structure Reports Online", "Microbial Cell Factories", "Optics Express", "PLoS ONE", "Frontiers in Neuroscience", "Algorithms", "Modern Economy", "World Journal of Mechanics", "INTERNATIONAL JOURNAL OF THE COMMONS", "Frontiers Media SA", "IGITUR, UTRECHT PUBLISHING & ARCHIVING SERVICES", "International Union of Crystallography (IUCr)", "MDPI AG", "Optical Society of America (OSA)", "Public Library of Science (PLoS)", "Scientific Research Publishing, Inc,", "Springer Science + Business Media" ],
"value": [  155.1,   1490, 1738.1,   1269,   1280,  300.9,    900,    752,  352.5,   1280,  352.5,  155.1,  300.9, 1738.1,   1269,   1652,   1490 ] 
},
"nodeWidth":     15,
"nodePadding":      6,
"layout":      1,
"unit": "EURO",
"title": "Author fees paid by Dortmund TU Publication Fund since 2013",
"id": "chart332329073883" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>

          <h3 id="tuhh">Fees paid by Hamburg University of Technology Publication Fund</h3>
          <div id = 'chart1c919688b5c' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart1c919688b5c",
"width":    960,
"height":    800,
"data": {
 "source": [ "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Sciknow Publications", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Public Library of Science (PLoS)", "Scientific Research Publishing, Inc,", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH", "Hamburg TUHH" ],
"target": [ "Advances in Materials Science and Engineering", "Advances in Fuzzy Systems", "BMC Genomics", "Environmental Sciences Europe", "AMB Express", "Open Journal of Social Science Research", "Optics Express", "Optics Express", "PLoS ONE", "Journal of Environmental Protection", "Academic Journals", "Academic Journals (Sapele, Nigeria/Nairobi, Kenya)", "Academy and Industry Research Collaboration Center (AIRCC)", "Acta Dermato-Venereologica", "AIP Publishing", "American Mathematical Society (AMS)", "American Physical Society (APS)", "American Vacuum Society", "Amsterdam University Press", "Association for Research in Vision and Ophthalmology (ARVO)", "Baishideng Publishing Group Co., Limited (formerly WJG Press)", "BioMed Central", "BMJ", "Cambridge University Press (CUP)", "Canadian Center of Science and Education", "Co-Action Publishing", "Copernicus GmbH", "Dove Medical Press Ltd.", "e-Century Publ. Corp.", "Education & Psychology I+D+i", "Elsevier BV", "EMBO", "Environmental Health Perspectives", "ESG", "European Optical Society", "Food Science Publisher", "Frontiers Media SA", "Genetics Society of America", "Hindawi Publishing Corporation", "IGIP", "Impact Journals LLC", "Informa UK Limited", "Institute of Electrical & Electronics Engineers (IEEE)", "InTech", "International Mountain Society (IMS) and United Nations University", "International Scientific Literature", "International Union of Crystallography (IUCr)", "IOP", "IOP Publishing", "Ivyspring International Publisher", "JMIR Publications Inc.", "KIT Scientific Publishing", "Lifescience Global", "MDPI AG", "MDPI, Basel", "Medknow", "Nature Publishing Group", "OMICS Publishing Group", "Optical Society of America (OSA)", "Oxford University Press (OUP)", "PAGEPress Publications", "Pensoft Publishers", "Pion Ltd", "Portland Press Ltd.", "Public Library of Science (PLoS)", "S. Karger AG", "SAGE Publications", "Schweizerbart", "Sciedu Press", "Sciencedomain International", "Scientific Research Publishing, Inc,", "Sciknow Publications", "Society for Neuroscience", "Springer Science + Business Media", "Taylor & Francis", "The Feinstein Institute for Medical Research (North Shore LIJ Research Institute)", "Thieme Publishing Group", "Ubiquity Press, Ltd.", "Univ. of Buckingham Pr.", "Walter de Gruyter GmbH", "Wiley-Blackwell" ],
"value": [ 1113.5, 542.05,   1920,   1065,   1785, 300.05, 1628.2, 1634.7, 1184.2, 738.46, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 1655.5, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 3262.8, null, null, null, null, null, 1184.2, null, null, null, null, null, 738.46, 300.05, null, 4770.1, null, null, null, null, null, null, null ] 
},
"nodeWidth":     15,
"nodePadding":      6,
"layout":      1,
"unit": "EURO",
"title": "Author fees paid by Hamburg TUHH Publication Fund since 2013",
"id": "chart1c919688b5c" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>
          
<h3 id="unireg">Fees paid by University of Regensburg Publication Fund 2012 &mdash; 13</h3>

  <div id = 'chart7c63c3ed967' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart7c63c3ed967",
"width":    960,
"height":    800,
"data": {
 "value": [ 2283.1,   1111,   2176, 1506.3, 1239.5,  192.8,  24810, 3595.9, 1142.4, 1682.6, 304.93, 1404.2,    890, 5052.2,  684.1, 1244.7, 2807.4, 5690.6, 1963.5, 1802.8,  50419, 1197.3,    833,  63001, 1173.1,  285.6, 4116.5,   2000,   2000, 1244.7, 719.95, 1963.5, 1981.3, 152.61, 152.32, 766.22, 771.01,   1100,   1056,   1076,   1076,   1224,   1216,   1192,   1160,   1096,   1236,   1200,   1056,    948,   1060,   1080,    516,    572,   1000,   1028,   1292,   1180,   1364,   1388,   1368,   1188, 756.59, 1797.1, 1023.7, 1022.3, 1028.3, 1019.4, 1079.6, 1079.6, 1079.6, 1095.4, 1088.6, 1106.2, 1077.8, 1075.3, 1031.8, 956.24,  943.4, 944.57, 1046.6,  285.6,  583.1,    575,   1071, 1142.4, 1142.4,   1904,   1904, 1142.4, 1028.2, 1142.4, 1142.4,   2380, 973.34, 1635.4,   1111,    119, 2084.2, 723.28, 1099.5, 1344.7, 1178.1, 1802.8, 1267.3, 1267.3, 1267.3,    890,    926, 1178.1, 1017.1,   1296,   1220,   1232, 1844.5,   1228,   1296,   1236,   1196,   1200,   1256,   1240,   1244,    840,   1120,   1096,   1048,   1080,   1316,   1124,   1132,    624,   1056,   1480,   1380,   1228,   1236,   1228,   1296,   1620, 625.32, 2074.6, 2010.9, 941.93, 1240.2, 1232.9, 1119.2, 1252.8, 1226.8, 1238.3, 1120.8, 1236.4, 1191.1, 1236.5,   1204, 1206.5, 1206.7, 1206.7, 1093.2, 1206.7, 1069.8, 1197.3, 1197.3, 1173.1, 1173.1, 1173.1, 1239.5,    833,   1904, 1523.2,    960, 1142.4, 1142.4, 684.25, 1142.4,  916.3,  916.3,   1368, 1538.8, 484.41,    357, 318.01, 383.11, 244.24, 237.64,    640,  684.1, 745.25,  192.8, 761.05 ],
"target": [ "Association for Research in Vision and Ophthalmology (ARVO)", "Baishideng Publishing Group Co., Limited (formerly WJG Press)", "Canadian Center of Science and Education", "e-Century Publ. Corp.", "Elsevier BV", "Food Science Publisher", "Frontiers Media SA", "Hindawi Publishing Corporation", "InTech", "International Scientific Literature", "International Union of Crystallography (IUCr)", "IOP Publishing", "Ivyspring International Publisher", "MDPI AG", "Medknow", "Nature Publishing Group", "OMICS Publishing Group", "Oxford University Press (OUP)", "PAGEPress Publications", "Pensoft Publishers", "Public Library of Science (PLoS)", "Scientific Research Publishing, Inc,", "Society for Publication of Acta Dermato-Venereologica ", "Springer Science + Business Media", "The Feinstein Institute for Medical Research (North Shore LIJ Research Institute)", "Walter de Gruyter GmbH", "Wiley-Blackwell", "Radiat Oncol", "ChemistryOpen", "Scientific Reports", "New J. Phys.", "Clinics and Practice", "Nucleic Acids Research", "Acta Cryst E Struct Rep Online", "Acta Cryst E Struct Rep Online", "Computational Intelligence and Neuroscience", "Journal of Ophthalmology", "BMC Bioinformatics", "BMC Neurosci", "BMC Cardiovascular Disorders", "BMC Musculoskeletal Disorders", "BMC Ear, Nose and Throat Disorders", "BMC Complement Altern Med", "BMC Clin Pathol", "Cardiovasc Diabetol", "Cardiovasc Diabetol", "Health and Quality of Life Outcomes", "Health and Quality of Life Outcomes", "Trials", "Radiat Oncol", "Journal of Vision", "Radiat Oncol", "J Med Case Rep", "J Med Case Rep", "Clin Transl Med", "Experimental & Translational Stroke Medicine", "Biol sex dif", "BMC Biophysics", "Transplant Res", "Transplant Res", "Transplant Res", "Arthritis Research & Therapy", "Medical Science Monitor", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS Neglected Tropical Diseases", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "ChemistryOpen", "PLoS ONE", "PLoS ONE", "Zeitschrift für Kristallographie - New Crystal Structures", "Front. Microbio.", "Front. Hum. Neurosci.", "Frontiers in Systems Neuroscience", "Frontiers in Systems Neuroscience", "Frontiers in Systems Neuroscience", "Front. Psychology", "Front. Psychology", "Front. Psychology", "Front. Psychology", "Front. Psychology", "Front. Psychology", "Front. Psychiatry", "Materials", "Sensors", "WJG", "PLoS ONE", "J Neurol Neurophysiol", "Journal of Physical Chemistry & Biophysics", "PLoS ONE", "Frontiers in Cellular and Infection Microbiology", "IJMS", "ZOOKEYS", "PLoS ONE", "PLoS ONE", "PLoS ONE", "Theranostics", "American Journal of Case Reports", "BMC Biotechnology", "BMC Cancer", "Arthritis Research & Therapy", "Health and Quality of Life Outcomes", "Critical Care", "Radiat Oncol", "Cardiovasc Diabetol", "BMC Med Genet", "BMC Palliat Care", "BMC Medical Imaging", "Critical Care", "Transplant Res", "Transplant Res", "J Cardiothorac Surg", "Journal of Vision", "Journal of Management and Sustainability", "Trials", "J Cardiothorac Surg", "J Med Case Rep", "J Ovarian Res", "Genome Biol", "J Cardiothorac Surg", "Radiat Oncol", "Journal of Management and Sustainability", "Critical Care", "Front. Psychology", "Radiat Oncol", "BMC Infect Dis", "BMC Ear, Nose and Throat Disorders", "BMC Cancer", "Health and Quality of Life Outcomes", "IJMS", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS Genetics", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS Genetics", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "EURASIP Journal on Advances in Signal Processing", "Journal of Analytical Sciences, Methods and Instrumentation", "PLoS ONE", "Molecular Medicine", "Physiological Reports", "CSBJ", "Acta Dermato-Venereologica", "Front. Psychology", "Front. Plant Sci.", "Front. Plant Sci.", "Mathematical Problems in Engineering", "Chromatin Remodelling", "New J. Phys.", "Front. Psychology", "Front. Plant Sci.", "International Journal of Dentistry", "Nucleic Acids Research", "Nucleic Acids Research", "Nucleic Acids Research", "PLoS ONE", "Nucleic Acids Research", "Journal of Vision", "Front. Integr. Neurosci.", "Front. Hum. Neurosci.", "Pharmaceuticals", "Surg Neurol Int", "International Journal of Molecular Epidemiology and Genetics", "Functional Foods in Health and Disease", "International Journal of Molecular Epidemiology and Genetics" ],
"source": [ "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Springer Science + Business Media", "Wiley-Blackwell", "Nature Publishing Group", "IOP Publishing", "PAGEPress Publications", "Oxford University Press (OUP)", "International Union of Crystallography (IUCr)", "International Union of Crystallography (IUCr)", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Association for Research in Vision and Ophthalmology (ARVO)", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "International Scientific Literature", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Wiley-Blackwell", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Walter de Gruyter GmbH", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "MDPI AG", "MDPI AG", "Baishideng Publishing Group Co., Limited (formerly WJG Press)", "Public Library of Science (PLoS)", "OMICS Publishing Group", "OMICS Publishing Group", "Public Library of Science (PLoS)", "Frontiers Media SA", "MDPI AG", "Pensoft Publishers", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Ivyspring International Publisher", "International Scientific Literature", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Association for Research in Vision and Ophthalmology (ARVO)", "Canadian Center of Science and Education", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Canadian Center of Science and Education", "Springer Science + Business Media", "Frontiers Media SA", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "MDPI AG", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Springer Science + Business Media", "Scientific Research Publishing, Inc,", "Public Library of Science (PLoS)", "The Feinstein Institute for Medical Research (North Shore LIJ Research Institute)", "Wiley-Blackwell", "Elsevier BV", "Society for Publication of Acta Dermato-Venereologica ", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Hindawi Publishing Corporation", "InTech", "IOP Publishing", "Frontiers Media SA", "Frontiers Media SA", "Hindawi Publishing Corporation", "Oxford University Press (OUP)", "Oxford University Press (OUP)", "Oxford University Press (OUP)", "Public Library of Science (PLoS)", "Oxford University Press (OUP)", "Association for Research in Vision and Ophthalmology (ARVO)", "Frontiers Media SA", "Frontiers Media SA", "MDPI AG", "Medknow", "e-Century Publ. Corp.", "Food Science Publisher", "e-Century Publ. Corp." ] 
},
"nodeWidth":     15,
"nodePadding":     10,
"layout":     32,
"unit": "EURO",
"title": "Author fees paid by University of Regensburg Publication Fund 2012-13",
"id": "chart7c63c3ed967" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>

<h3 id="fu">Fees paid by FU Berlin</h3>


<div id = 'chart56c61d66fd4' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart56c61d66fd4",
"width":    960,
"height":    800,
"data": {
 "source": [ "Cambridge University Press (CUP)", "AIP Publishing", "American Mathematical Society (AMS)", "Wiley-Blackwell", "Schweizerbart", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Society for Neuroscience", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "MDPI AG", "MDPI AG", "MDPI AG", "Co-Action Publishing", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Copernicus GmbH", "Canadian Center of Science and Education", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin", "FU Berlin" ],
"target": [ "Journal of Nutritional Science", "AIP Advances", "Proceedings of the American Mathematical Society, Series B", "Evolutionary Applications", "Meteorologische Zeitschrift", "BMC Microbiology", "BMC Family Practice", "BMC Biology", "BMC Veterinary Research", "Parasites & Vectors", "Earth, Planets and Space", "SpringerPlus", "AMB Express", "Psychology of Well-Being: Theory, Research and Practice", "PLoS Neglected Tropical Diseases", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS Pathogens", "Journal of Neuroscience", "Frontiers in Human Neuroscience", "Frontiers in Human Neuroscience", "Frontiers in Human Neuroscience", "Frontiers in Physiology", "Frontiers in Plant Science", "Frontiers in Psychology", "Frontiers in Psychology", "Frontiers in Psychology", "Frontiers in Psychology", "Energies", "International Journal of Molecular Sciences", "Remote Sensing", "Tellus A", "Advances in Pure Mathematics", "Psychology", "Atmospheric Measurement Techniques Discussions", "Journal of Educational and Developmental Psychology", "Academic Journals (Sapele, Nigeria/Nairobi, Kenya)", "Academy and Industry Research Collaboration Center (AIRCC)", "Acta Dermato-Venereologica", "AIP Publishing", "American Mathematical Society (AMS)", "American Physical Society (APS)", "American Vacuum Society", "Amsterdam University Press", "Association for Research in Vision and Ophthalmology (ARVO)", "Baishideng Publishing Group Co., Limited (formerly WJG Press)", "BMJ", "Cambridge University Press (CUP)", "Canadian Center of Science and Education", "Co-Action Publishing", "Copernicus GmbH", "Dove Medical Press Ltd.", "e-Century Publ. Corp.", "Education & Psychology I+D+i", "Elsevier", "Elsevier BV", "EMBO", "Environmental Health Perspectives", "ESG", "Food Science Publisher", "Frontiers Media SA", "Genetics Society of America", "Hindawi Publishing Corporation", "IGIP", "Impact Journals LLC", "Informa UK Limited", "Institute of Electrical & Electronics Engineers (IEEE)", "InTech", "International Scientific Literature", "International Union of Crystallography (IUCr)", "IOP", "IOP Publishing", "Ivyspring International Publisher", "JMIR Publications Inc.", "KIT Scientific Publishing", "Lifescience Global", "MDPI AG", "Medknow", "Nature Publishing Group", "OMICS Publishing Group", "Optical Society of America (OSA)", "Oxford University Press (OUP)", "PAGEPress Publications", "Pensoft Publishers", "Pion Ltd", "Portland Press Ltd.", "Public Library of Science (PLoS)", "S. Karger AG", "SAGE Publications", "Schweizerbart", "Sciedu Press", "Scientific Research Publishing, Inc,", "Society for Neuroscience", "Springer Science + Business Media", "Taylor & Francis", "The Feinstein Institute for Medical Research (North Shore LIJ Research Institute)", "Thieme Publishing Group", "Ubiquity Press, Ltd.", "Univ. of Buckingham Pr.", "Walter de Gruyter GmbH", "Wiley-Blackwell" ],
"value": [ 1400.8, 1176.6, 668.04, 1585.1,   1568,   1890,   1660,   2000, 1957.5,   1355,    720, 1100.8, 1850.5, 226.99,   1961, 993.24, 1176.6, 1176.6,   1177, 996.24,   1173, 1178.9, 997.27,   1029, 1202.5, 1270.5,   2000, 1500.2,   1904, 1142.4,   1904, 1142.4,   1280, 684.25,   1904,    575, 1142.4, 585.05, 1568.8,   1389,    900,    437, 451.05, 1113.8,    960, null, null, null, 1176.6, 668.04, null, null, null, null, null, null, 1400.8,    960,    900, 1113.8, null, null, null, null, null, null, null, null, null,  11678, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 3542.8, null, null, null, null, null, null, null, null, null,  16332, null, null,   1568, null, 888.05, 1500.2,  12761, null, null, null, null, null, null, 1585.1 ] 
},
"nodeWidth":     15,
"nodePadding":      6,
"layout":      1,
"unit": "EURO",
"title": "Author fees paid by FU Berlin Publication Fund since 2013",
"id": "chart56c61d66fd4" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>


<h3 id="gfz">Fees paid by GFZ-Potsdam</h3>

<div id = 'chart56c6689d07b' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart56c6689d07b",
"width":    960,
"height":    800,
"data": {
 "source": [ "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Elsevier BV", "Frontiers Media SA", "Frontiers Media SA", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "Nature Publishing Group", "Nature Publishing Group", "Nature Publishing Group", "Nature Publishing Group", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam", "GFZ-Potsdam" ],
"target": [ "Atmospheric Measurement Techniques", "Atmospheric Measurement Techniques Discussions", "Annales Geophysicae", "Annales Geophysicae", "Annales Geophysicae", "Annales Geophysicae", "Annales Geophysicae", "Annales Geophysicae", "Annales Geophysicae", "Annales Geophysicae", "Annales Geophysicae", "Annales Geophysicae", "Climate of the Past", "Climate of the Past", "Climate of the Past", "Climate of the Past", "Climate of the Past", "Climate of the Past", "Geoscientific Model Development Discussions", "Geothermal Energy Science", "Hydrology and Earth System Sciences", "Hydrology and Earth System Sciences", "Hydrology and Earth System Sciences", "Hydrology and Earth System Sciences", "Natural Hazards and Earth System Science", "Natural Hazards and Earth System Science", "Natural Hazards and Earth System Science", "Natural Hazards and Earth System Science", "Natural Hazards and Earth System Science", "Natural Hazards and Earth System Science", "Natural Hazards and Earth System Science", "Natural Hazards and Earth System Sciences Discussions", "Natural Hazards and Earth System Sciences Discussions", "The Cryosphere", "The Cryosphere", "The Cryosphere Discussions", "Energy", "Frontiers in Earth Science", "Frontiers in Physics", "Energies", "Energies", "Energies", "Remote Sensing", "Remote Sensing", "Remote Sensing", "Remote Sensing", "Remote Sensing", "Remote Sensing", "Remote Sensing", "Remote Sensing", "Remote Sensing", "Sensors", "Sensors", "Water", "Nature Communications", "Nature Communications", "Scientific Reports", "Scientific Reports", "PLoS ONE", "PLoS ONE", "Academic Journals (Sapele, Nigeria/Nairobi, Kenya)", "Academy and Industry Research Collaboration Center (AIRCC)", "Acta Dermato-Venereologica", "AIP Publishing", "American Mathematical Society (AMS)", "American Physical Society (APS)", "American Vacuum Society", "Amsterdam University Press", "Association for Research in Vision and Ophthalmology (ARVO)", "Baishideng Publishing Group Co., Limited (formerly WJG Press)", "BMJ", "Cambridge University Press (CUP)", "Canadian Center of Science and Education", "Co-Action Publishing", "Copernicus GmbH", "Dove Medical Press Ltd.", "e-Century Publ. Corp.", "Education & Psychology I+D+i", "Elsevier", "Elsevier BV", "EMBO", "Environmental Health Perspectives", "ESG", "Food Science Publisher", "Frontiers Media SA", "Genetics Society of America", "Hindawi Publishing Corporation", "IGIP", "Impact Journals LLC", "Informa UK Limited", "Institute of Electrical & Electronics Engineers (IEEE)", "InTech", "International Scientific Literature", "International Union of Crystallography (IUCr)", "IOP", "IOP Publishing", "Ivyspring International Publisher", "JMIR Publications Inc.", "KIT Scientific Publishing", "Lifescience Global", "MDPI AG", "Medknow", "Nature Publishing Group", "OMICS Publishing Group", "Optical Society of America (OSA)", "Oxford University Press (OUP)", "PAGEPress Publications", "Pensoft Publishers", "Pion Ltd", "Portland Press Ltd.", "Public Library of Science (PLoS)", "S. Karger AG", "SAGE Publications", "Schweizerbart", "Sciedu Press", "Scientific Research Publishing, Inc,", "Society for Neuroscience", "Springer Science + Business Media", "Taylor & Francis", "The Feinstein Institute for Medical Research (North Shore LIJ Research Institute)", "Thieme Publishing Group", "Ubiquity Press, Ltd.", "Univ. of Buckingham Pr.", "Walter de Gruyter GmbH", "Wiley-Blackwell" ],
"value": [ 771.12, 1256.6,  487.9, 875.84, 930.58, 731.85, 683.06, 536.69, 766.36, 634.27, 683.06, 439.11, 1104.3, 1587.5, 1311.4, 828.24, 1104.3, 1449.4, 1285.2, 1505.3,   1691, 885.36,   1829, 1449.4, 656.88, 437.92, 656.88, 1019.6,  892.5, 1349.5,   2261,  856.8,  678.3, 1113.8, 724.71, 1242.4, 2189.6,   1904, 1523.2, 930.58,  940.1, 1178.1, 772.31, 769.93, 772.85, 976.45, 1057.9, 1059.1,   1065,   1065,   1071, 1737.4, 1725.5, 882.98,   2023,   4403, 1244.7, 1244.7,   1190, 1181.7, null, null, null, null, null, null, null, null, null, null, null, null, null, null,  36717, null, null, null, null, 2189.6, null, null, null, null, 3427.2, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null,  16004, null, 8915.5, null, null, null, null, null, null, null, 2371.7, null, null, null, null, null, null, null, null, null, null, null, null, null, null ] 
},
"nodeWidth":     15,
"nodePadding":      6,
"layout":      1,
"unit": "EURO",
"title": "Author fees paid by GFZ-Potsdam Publication Fund since 2013",
"id": "chart56c6689d07b" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>

<h3 id="heidi">fees paid by Heidelberg University 2014</h3>
          <div id = 'chart1c85433a8723' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart1c85433a8723",
"width":    960,
"height":    800,
"data": {
 "source": [ "Wiley-Blackwell", "Nature Publishing Group", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "S. Karger AG", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Dove Medical Press Ltd.", "Dove Medical Press Ltd.", "Dove Medical Press Ltd.", "Acta Dermato-Venereologica", "European Optical Society", "European Optical Society", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "Co-Action Publishing", "Co-Action Publishing", "OMICS Publishing Group", "Scientific Research Publishing, Inc,", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U", "Heidelberg U" ],
"target": [ "Cancer Medicine", "Scientific Reports", "Neural Plasticity", "Mediators of Inflammation", "Cellular Physiology and Biochemistry", "BMC Family Practice", "BMC Gastroenterology", "BMC Geriatrics", "BMC Cancer", "BMC Cancer", "BMC Cancer", "BMC Public Health", "BMC Surgery", "BMC Oral Health", "BMC Oral Health", "BMC Medical Education", "BMC Medical Education", "BMC Medical Education", "Malaria Journal", "International Journal of Health Geographics", "Reproductive Biology and Endocrinology", "BMC Biology", "Behavioral and Brain Functions", "Trials", "Radiation Oncology", "Radiation Oncology", "Radiation Oncology", "Radiation Oncology", "Radiation Oncology", "Radiation Oncology", "Radiation Oncology", "Journal of Medical Case Reports", "BMC Research Notes", "Journal of Experimental & Clinical Cancer Research", "Journal of Foot and Ankle Research", "European Journal of Medical Research", "Acta Neuropathologica Communications", "BMC Infectious Diseases", "BMC Psychiatry", "Health and Quality of Life Outcomes", "Journal of Neuroinflammation", "Journal of Orthopaedic Surgery and Research", "Journal of Orthopaedic Surgery and Research", "Critical Care", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "Advances in Medical Education and Practice", "Drug Design, Development and Therapy", "Drug Design, Development and Therapy", "Acta Dermato Venereologica", "Journal of the European Optical Society: Rapid Publications", "Journal of the European Optical Society: Rapid Publications", "Frontiers in Neuroanatomy", "Frontiers in Behavioral Neuroscience", "Frontiers in Neurology", "Frontiers in Human Neuroscience", "Frontiers in Physics", "Frontiers in Psychology", "Frontiers in Psychiatry", "Frontiers in Psychiatry", "International Journal of Environmental Research and Public Health", "Molecules", "Remote Sensing", "Sustainability", "Global Health Action", "Global Health Action", "Journal of Pulmonary & Respiratory Medicine", "Psychology", "Atmospheric Chemistry and Physics", "Atmospheric Measurement Techniques", "Atmospheric Measurement Techniques", "Atmospheric Measurement Techniques Discussions", "Climate of the Past Discussions", "Natural Hazards and Earth System Sciences Discussions", "Ocean Science Discussions", "Academic Journals (Sapele, Nigeria/Nairobi, Kenya)", "Academy and Industry Research Collaboration Center (AIRCC)", "Acta Dermato-Venereologica", "AIP Publishing", "American Mathematical Society (AMS)", "American Physical Society (APS)", "American Vacuum Society", "Amsterdam University Press", "Association for Research in Vision and Ophthalmology (ARVO)", "Baishideng Publishing Group Co., Limited (formerly WJG Press)", "BioMed Central", "BMJ", "Cambridge University Press (CUP)", "Canadian Center of Science and Education", "Co-Action Publishing", "Copernicus GmbH", "Dove Medical Press Ltd.", "e-Century Publ. Corp.", "Education & Psychology I+D+i", "Elsevier BV", "EMBO", "Environmental Health Perspectives", "ESG", "European Optical Society", "Food Science Publisher", "Frontiers Media SA", "Genetics Society of America", "Hindawi Publishing Corporation", "IGIP", "Impact Journals LLC", "Informa UK Limited", "Institute of Electrical & Electronics Engineers (IEEE)", "InTech", "International Scientific Literature", "International Union of Crystallography (IUCr)", "IOP", "IOP Publishing", "Ivyspring International Publisher", "JMIR Publications Inc.", "KIT Scientific Publishing", "Lifescience Global", "MDPI AG", "MDPI, Basel", "Medknow", "Nature Publishing Group", "OMICS Publishing Group", "Optical Society of America (OSA)", "Oxford University Press (OUP)", "PAGEPress Publications", "Pensoft Publishers", "Pion Ltd", "Portland Press Ltd.", "Public Library of Science (PLoS)", "S. Karger AG", "SAGE Publications", "Schweizerbart", "Sciedu Press", "Scientific Research Publishing, Inc,", "Society for Neuroscience", "Springer Science + Business Media", "Taylor & Francis", "The Feinstein Institute for Medical Research (North Shore LIJ Research Institute)", "Thieme Publishing Group", "Ubiquity Press, Ltd.", "Univ. of Buckingham Pr.", "Walter de Gruyter GmbH", "Wiley-Blackwell" ],
"value": [ 1618.4, 1244.7, 1052.1, 1297.4, 1959.2, 1513.7,   1500, 1594.6, 1868.3, 1513.7, 1513.7,   1523, 1513.7,   1523, 1508.9,   1523, 1470.8, 1508.9, 1470.8, 1342.3,   1409,   1804,   1523,   1523, 1342.3, 1342.3, 1342.3, 1342.3, 1342.3, 1337.6, 1342.3,    745, 861.56, 1418.5, 1731.5, 1746.9, 994.84,   1523, 1513.7, 1508.9, 1561.3, 1827.8, 1746.9, 1508.9, 1216.1,   1170, 1172.9, 1185.3, 1192.5, 1192.7, 1191.3,   1182,   1207, 1196.1, 1632.7,   1436, 1708.8,   1428,  333.2,  333.2,   1904, 1523.2,   1904, 1142.4, 1523.2,  916.3,   1904,    960, 1392.7, 1779.3, 999.13, 804.75, 1354.8,    476, 1568.7, 609.71, 1173.3, 1999.2, 828.24, 966.28, 1656.5, 874.65, 799.68, null, null,   1428, null, null, null, null, null, null, null, null, null, null, null, 1830.8, 8297.9, 4777.5, null, null, null, null, null, null,  666.4, null,  11777, null, 2349.5, null, null, null, null, null, null, null, null, null, null, null, null, null, 4975.9, null, null, 1244.7, 1568.7, null, null, null, null, null, null,  11906, 1959.2, null, null, null, 609.71, null,  57228, null, null, null, null, null, null, 1618.4 ] 
},
"nodeWidth":     15,
"nodePadding":      6,
"layout":      1,
"unit": "EURO",
"title": "Author fees paid by Heidelberg U Publication Fund since 2013",
"id": "chart1c85433a8723" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>
          
          <h3 id="mdc">Fees paid by Max Delbrück Center 2014</h3>
          
          <div id = 'chart287b1148a209' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart287b1148a209",
"width":    960,
"height":    800,
"data": {
 "source": [ "Wiley-Blackwell", "Elsevier BV", "Elsevier BV", "Elsevier BV", "Ovid Technologies (Wolters Kluwer Health)", "Elsevier BV", "Nature Publishing Group", "Oxford University Press (OUP)", "Oxford University Press (OUP)", "Oxford University Press (OUP)", "Oxford University Press (OUP)", "Oxford University Press (OUP)", "Oxford University Press (OUP)", "Oxford University Press (OUP)", "Cold Spring Harbor Laboratory Press", "Wiley-Blackwell", "Wiley-Blackwell", "American Physiological Society", "American Society for Clinical Investigation", "American Society for Clinical Investigation", "Springer Science + Business Media", "Springer Science + Business Media", "The Company of Biologists", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "EMBO", "Frontiers Media SA", "Frontiers Media SA", "Informa UK Limited", "MDC", "MDC", "MDC", "MDC", "MDC", "MDC", "MDC", "MDC", "MDC", "MDC", "MDC", "MDC", "MDC", "MDC" ],
"target": [ "Hepatology", "Cell Reports", "Cell Reports", "Neuropharmacology", "Pain", "Developmental Biology", "Nature Communications", "Bioinformatics", "Nucleic Acids Research", "Nucleic Acids Research", "Nucleic Acids Research", "Nucleic Acids Research", "Nucleic Acids Research", "Nucleic Acids Research", "Genes & Development", "European Journal of Neuroscience", "The Journal of Physiology", "Physiological Genomics", "Journal of Clinical Investigation", "Journal of Clinical Investigation", "BMC Medical Genetics", "Cancer & Metabolism", "Disease Models & Mechanisms", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "EMBO reports", "Frontiers in Cellular Neuroscience", "Frontiers in Psychiatry", "Cell Cycle", "American Physiological Society", "American Society for Clinical Investigation", "Cold Spring Harbor Laboratory Press", "Elsevier BV", "EMBO", "Frontiers Media SA", "Informa UK Limited", "Nature Publishing Group", "Ovid Technologies (Wolters Kluwer Health)", "Oxford University Press (OUP)", "Public Library of Science (PLoS)", "Springer Science + Business Media", "The Company of Biologists", "Wiley-Blackwell" ],
"value": [ 490.58,   2535, 4011.4,   2200, 1221.4, 1314.8,   3425,   1800,   2130,   2130, 2156.5,   2130,   1065,   2130, 4699.6, 2192.8,   3000, 772.86, 3399.6, 4563.6,   1212, 725.14, 1482.5,   1000, 989.98,  767.6, 978.78, 1094.3, 767.59, 1103.8,    980,    575, 1091.5, 1382.2, 772.86, 7963.1, 4699.6,  10061,    980, 1666.5, 1382.2,   3425, 1221.4,  13542, 6702.1, 1937.1, 1482.5, 5683.3 ] 
},
"nodeWidth":     15,
"nodePadding":      6,
"layout":      1,
"unit": "EURO",
"title": "Author fees paid by MDC Publication Fund since 2013",
"id": "chart287b1148a209" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>
          
          <h3 id ="tuchemnitz">Fees paid by Technische Universität Chemnitz in 2014 in 2014</h3>

<div id = 'chart287b378605bc' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart287b378605bc",
"width":    960,
"height":    800,
"data": {
 "source": [ "AIP Publishing", "AIP Publishing", "Springer Science + Business Media", "Springer Science + Business Media", "Optical Society of America (OSA)", "Symbiosis Group", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "MDPI AG", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Canadian Center of Science and Education", "Canadian Center of Science and Education", "Canadian Center of Science and Education", "TU Chemnitz", "TU Chemnitz", "TU Chemnitz", "TU Chemnitz", "TU Chemnitz", "TU Chemnitz", "TU Chemnitz", "TU Chemnitz" ],
"target": [ "APL Materials", "AIP Advances", "Theoretical Biology and Medical Modelling", "SpringerPlus", "Optics Express", "SOJ Materials Science & Engineering", "Frontiers in Neurorobotics", "Frontiers in Computational Neuroscience", "Frontiers in Psychology", "Molecules", "Open Journal of Composite Materials", "Open Journal of Composite Materials", "Journal of Materials Science Research", "Journal of Materials Science Research", "Journal of Materials Science Research", "AIP Publishing", "Canadian Center of Science and Education", "Frontiers Media SA", "MDPI AG", "Optical Society of America (OSA)", "Scientific Research Publishing, Inc,", "Springer Science + Business Media", "Symbiosis Group" ],
"value": [ 1955.5, 1288.6, 1975.4, 1011.5, 1657.7, 704.79, 1142.4,   1904,   1904, 1771.9, 600.49, 674.91, 282.91, 283.37, 283.37, 3244.1, 849.65, 4950.4, 1771.9, 1657.7, 1275.4, 2986.9, 704.79 ] 
},
"nodeWidth":     15,
"nodePadding":      6,
"layout":      1,
"unit": "EURO",
"title": "Author fees paid by TU Chemnitz Publication Fund",
"id": "chart287b378605bc" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>

<h3 id="unibi">Fees paid by Bielefeld University Publication Fund since 2012</h3>


<div id = 'chart56c78cd2e0a' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart56c78cd2e0a",
"width":    960,
"height":    800,
"data": {
 "source": [ "American Physical Society (APS)", "Association for Research in Vision and Ophthalmology (ARVO)", "Association for Research in Vision and Ophthalmology (ARVO)", "Association for Research in Vision and Ophthalmology (ARVO)", "Association for Research in Vision and Ophthalmology (ARVO)", "Association for Research in Vision and Ophthalmology (ARVO)", "BMJ", "Co-Action Publishing", "Co-Action Publishing", "Elsevier BV", "Elsevier BV", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Informa UK Limited", "IOP Publishing", "IOP Publishing", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "Nature Publishing Group", "Nature Publishing Group", "OMICS Publishing Group", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Scientific Research Publishing, Inc,", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Wiley-Blackwell", "Wiley-Blackwell", "Wiley-Blackwell", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U", "Bielefeld U" ],
"target": [ "Physical Review X", "Journal of Vision", "Journal of Vision", "Journal of Vision", "Journal of Vision", "Journal of Vision", "BMJ Open", "European Journal of Psychotraumatology", "Global Health Action", "Stem Cell Research", "Computational and Structural Biotechnology Journal", "Frontiers in Bioengineering and Biotechnology", "Frontiers in Cellular and Infection Microbiology", "Frontiers in Microbiology", "Frontiers in Behavioral Neuroscience", "Frontiers in Behavioral Neuroscience", "Frontiers in Behavioral Neuroscience", "Frontiers in Behavioral Neuroscience", "Frontiers in Behavioral Neuroscience", "Frontiers in Behavioral Neuroscience", "Frontiers in Behavioral Neuroscience", "Frontiers in Behavioral Neuroscience", "Frontiers in Neurorobotics", "Frontiers in Neural Circuits", "Frontiers in Neural Circuits", "Frontiers in Computational Neuroscience", "Frontiers in Computational Neuroscience", "Frontiers in Computational Neuroscience", "Frontiers in Human Neuroscience", "Frontiers in Human Neuroscience", "Frontiers in Human Neuroscience", "Frontiers in Human Neuroscience", "Frontiers in Integrative Neuroscience", "Frontiers in Plant Science", "Frontiers in Plant Science", "Frontiers in Plant Science", "Frontiers in Plant Science", "Frontiers in Psychology", "Frontiers in Psychology", "Frontiers in Psychology", "Frontiers in Psychology", "Frontiers in Psychology", "Frontiers in Psychology", "Frontiers in Psychology", "Frontiers in Psychology", "Frontiers in Psychology", "Frontiers in Psychology", "Frontiers in Psychology", "Frontiers in Psychology", "Frontiers in Psychology", "Frontiers in Psychiatry", "Education Research International", "Anatomy Research International", "Stem Cells International", "Health Psychology and Behavioral Medicine", "New Journal of Physics", "New Journal of Physics", "Entropy", "Entropy", "International Journal of Environmental Research and Public Health", "Symmetry", "Symmetry", "Scientific Reports", "Scientific Reports", "Journal of Biotechnology & Biomaterials", "PLoS Computational Biology", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "Journal of Intelligent Learning Systems and Applications", "BMC Bioinformatics", "BMC Bioinformatics", "BMC Bioinformatics", "BMC Bioinformatics", "BMC Bioinformatics", "BMC Genomics", "BMC Genomics", "BMC Genomics", "BMC Genomics", "BMC Genomics", "BMC Genomics", "BMC Genomics", "BMC Genomics", "BMC Genomics", "BMC Genomics", "BMC Genomics", "BMC Genomics", "BMC Microbiology", "BMC Microbiology", "BMC Microbiology", "BMC Microbiology", "BMC Microbiology", "BMC Infectious Diseases", "BMC Pregnancy and Childbirth", "BMC Public Health", "BMC Public Health", "BMC Public Health", "BMC Public Health", "BMC Public Health", "BMC Public Health", "BMC Public Health", "BMC Public Health", "BMC Public Health", "BMC Public Health", "BMC Biotechnology", "BMC Biotechnology", "BMC Biotechnology", "BMC Structural Biology", "BMC Structural Biology", "BMC Women's Health", "BMC Women's Health", "Microbial Cell Factories", "Environmental Health", "Proteome Science", "Health and Quality of Life Outcomes", "Nanoscale Research Letters", "Journal of NeuroEngineering and Rehabilitation", "Globalization and Health", "Plant Methods", "Substance Abuse Treatment, Prevention, and Policy", "Biotechnology for Biofuels", "BMC Psychology", "BMC Psychology", "SpringerPlus", "BMC Bioinformatics", "BMC Plant Biology", "BMC Psychiatry", "AMB Express", "Stem Cell Research & Therapy", "Ecology and Evolution", "Ecology and Evolution", "Ecology and Evolution", "Academic Journals (Sapele, Nigeria/Nairobi, Kenya)", "Academy and Industry Research Collaboration Center (AIRCC)", "Acta Dermato-Venereologica", "AIP Publishing", "American Mathematical Society (AMS)", "American Physical Society (APS)", "American Vacuum Society", "Amsterdam University Press", "Association for Research in Vision and Ophthalmology (ARVO)", "Baishideng Publishing Group Co., Limited (formerly WJG Press)", "BMJ", "Cambridge University Press (CUP)", "Canadian Center of Science and Education", "Co-Action Publishing", "Copernicus GmbH", "Dove Medical Press Ltd.", "e-Century Publ. Corp.", "Education & Psychology I+D+i", "Elsevier", "Elsevier BV", "EMBO", "Environmental Health Perspectives", "ESG", "Food Science Publisher", "Frontiers Media SA", "Genetics Society of America", "Hindawi Publishing Corporation", "IGIP", "Impact Journals LLC", "Informa UK Limited", "Institute of Electrical & Electronics Engineers (IEEE)", "InTech", "International Scientific Literature", "International Union of Crystallography (IUCr)", "IOP", "IOP Publishing", "Ivyspring International Publisher", "JMIR Publications Inc.", "KIT Scientific Publishing", "Lifescience Global", "MDPI AG", "Medknow", "Nature Publishing Group", "OMICS Publishing Group", "Optical Society of America (OSA)", "Oxford University Press (OUP)", "PAGEPress Publications", "Pensoft Publishers", "Pion Ltd", "Portland Press Ltd.", "Public Library of Science (PLoS)", "S. Karger AG", "SAGE Publications", "Schweizerbart", "Sciedu Press", "Scientific Research Publishing, Inc,", "Society for Neuroscience", "Springer Science + Business Media", "Taylor & Francis", "The Feinstein Institute for Medical Research (North Shore LIJ Research Institute)", "Thieme Publishing Group", "Ubiquity Press, Ltd.", "Univ. of Buckingham Pr.", "Walter de Gruyter GmbH", "Wiley-Blackwell" ],
"value": [   1087,    961,   1037,   1724,   1005, 1785.2, 1130.5,  928.2,    476, 1586.1,    142,    912,    900,    912,   1904,    916,   1142,   1904,   1142,   1520,  731.5,   1520,   1142,   1600,    912,   1143,   1142,   1520,   1904,   1143,   1520,    816,   1520,    960,   1142,   1142,    912,    960,    960,    960,    960,   1142,   1142,    917,   1142,    912,    912,   1520,    912,    912,   1520,    462,    388,   1078,   1017,  785.4, 1570.8,    990,   1175, 1353.3,    493,    493,   1046, 1244.7, 879.67,   2053,    915,    958,    968,    968,   1265,   1109,   1232,   1232,   1109,   1109,   1109,   1232,   1232,   1232,   1232,   1109,   1069,   1069,   1069, 1068.5, 1068.5,    984,    992,   1042,    997,   1010,   1010,   1064,   1064,   1064,   1077,    732,   1520, 1257.5, 1257.5,   1081,   1081,   1500,   1480,   1535,   1228,   1212,   1212,   1212,   1190,   1280,   1276,   1272, 1307.9,   1545,   1490,   1370,   1240,   1200,   1236,   1545,   1490,   1470,   1252,   1228,   1296,   1236,   1280,   1216,   1240,   1276,   1232,   1296,   1268,   1475,   1276,   1276,   1200,   1048,   1172,   1465,   1565,    800,    948,   1216,   1148,   1048,   1348,   1236,   1240,    850,   1280,   1280,   1280,   1200,   1216,   1333,   1457,   1457, null, null, null, null, null,   1087, null, null, 6512.2, null, 1130.5, null, null, 1404.2, null, null, null, null, null, 1728.1, null, null, null, null,  46892, null,   1928, null, null,   1017, null, null, null, null, null, 2356.2, null, null, null, null, 4504.3, null, 2290.7, 879.67, null, null, null, null, null, null,  35712, null, null, null, null,    732, null,  74875, null, null, null, null, null, null,   4247 ] 
},
"nodeWidth":     15,
"nodePadding":      6,
"layout":      1,
"unit": "EURO",
"title": "Author fees paid by Bielefeld U Publication Fund since 2013",
"id": "chart56c78cd2e0a" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>

<h3>Code</h3>

<p>Sample code to generate sankey plot from Bielefeld University dataset</p>
<pre><code class="r">

require(devtools)
devtools::install_github("rCharts", "ramnathv")
library("rCharts")

unibi <- read.csv("data/unibi12-13.csv", header = TRUE, sep = ",")

#select columns
unibi.sub <- unibi[,c("Publisher", "Journal", "EURO")]

#rename
colnames(unibi.sub) <- c("source", "target", "value")
unibi.sub$value <- as.numeric(unibi.sub$value)

#get affiliation 
tt <- as.data.frame(as.matrix((tapply(unibi.sub$value,unibi.sub$source, sum))))
tt$target <- rownames(tt)
tt$source <- rep("Uni Bielefeld", times = nrow(tt))
colnames(tt) <- c("value", "target", "source")

unibi.sub <- rbind(tt, unibi.sub)


#now we finally have the data in the form we need
sankeyPlot <- rCharts$new()
sankeyPlot$setLib('http://timelyportfolio.github.io/rCharts_d3_sankey')

sankeyPlot$set(
  data = unibi.sub,
  nodeWidth = 15,
  nodePadding = 10,
  layout = 32,
  width = 960,
  height = 800,
  unit = "EURO",
  title= "Author fees paid by Bielefeld University Publication Fund 2012-13"
)
sankeyPlot

</code></pre>

<h2 id="licence">Licence</h2>
<p>The datasets are made available under the Open Database License: http://opendatacommons.org/licenses/odbl/1.0/. Any rights in individual contents of the database are licensed under the Database Contents License: http://opendatacommons.org/licenses/dbcl/1.0/</p>
<p>This work is licensed under the Creative Commons Attribution 4.0 Unported License.</p>
<h2 id="how-to-cite">How to cite?</h2>
<p>When citing this dataset, please indicate the <a href="https://github.com/OpenAPC/openapc-de/releases/">release</a> you are referring to. The releases also contain information on contributors relating to the respective release.</p>

<p>Please do not cite the master branch of the Github repository (<a href="https://github.com/OpenAPC/openapc-de/tree/master/">https://github.com/OpenAPC/openapc-de/tree/master/</a>), but use the release numbers/tags.</p>

<p>Bielefeld University Library archives a copy (including commit history). To cite:</p>

<p>{Contributors:} <em>Datasets on fee-based Open Access publishing across German Institutions</em>. Bielefeld University. <a href="http://dx.doi.org/10.4119/UNIBI/UB.2014.18">10.4119/UNIBI/UB.2014.18</a></p>

<h2 id="acknowledgement">Acknowledgement</h2>
<p>This project follows <a href="http://blog.wellcome.ac.uk/2014/03/28/the-cost-of-open-access-publishing-a-progress-report/">Wellcome Trust example to share data on paid APCs</a>. It recognises efforts from <a href="https://www.jisc-collections.ac.uk/News/Releasing-open-data-about-Total-Cost-of-Ownership/">JISC</a> and the <a href="http://esac-initiative.org/">ESAC initative</a> to standardise APC reporting.</p>
<p>For data enrichment, sample visualisations and explorations we build on the work of <a href="http://ropensci.org/">rOpenSci</a> and <a href="http://librecat.org/">LibreCat/Catmandu</a>.</p>
<h2 id="contributors">Contributors</h2>
         <p>Jochen Apel, Hans-Georg Becker, Roland Bertelmann, Daniel Beucke, Ute Blumtritt, Dorothea Busjahn, Gernot Deinzer, Andrea Dorner,  Clemens Engelhardt, Dominik Hell, Ulrich Herb, Inken Feldsien-Sudhaus, Fabian Franke, Claudia Frick, Kai Karin Geschuhn, Gerrit Kuehle, Doris Jaeger, Stephanie Kroiss, Kathrin Lucht-Roussel, Frank Lützenkirchen, Anja Oberländer, Vitali Peil, Dirk Pieper, Tobias Pohlmann, Michael Schlachter,  Florian Ruckelshausen, Birgit Schlegel, Adriana Sikora, Marco Tullney, Astrid Vieler, Sabine Witt, Najko Jahn</p>
<h2 id="contact">Contact</h2>
<p>For bugs, feature requests and other issues, please submit an issue via <a href="https://github.com/OpenAPC/openapc-de/issues/new">Github</a>.</p>
<p>For general comments, email najko.jahn at uni-bielefeld.de and dirk.pieper at uni-bielefeld.de</p>


  </section>

    </div>
    </div> 
    </div> 
  </body>
</html>